!function(){"use strict";var t=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},e=function(e){return Object(t(e))},n={}.hasOwnProperty,i=function(t,e){return n.call(t,e)},o={}.toString,r=function(t){return o.call(t).slice(8,-1)},a=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)},s=function(e){return a(t(e))},p=Math.ceil,c=Math.floor,l=function(t){return isNaN(t=+t)?0:(t>0?c:p)(t)},u=Math.min,h=function(t){return t>0?u(l(t),9007199254740991):0},f=Math.max,x=Math.min,d="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function _(t,e){return t(e={exports:{}},e.exports),e.exports}var g,m=_(function(t){var e=t.exports={version:"2.6.2"};"number"==typeof __e&&(__e=e)}),b=(m.version,_(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),v=_(function(t){var e=b["__core-js_shared__"]||(b["__core-js_shared__"]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:m.version,mode:"pure",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),y=0,k=Math.random(),w=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++y+k).toString(36))},E=v("keys"),C=function(t){return E[t]||(E[t]=w(t))},P=(g=!1,function(t,e,n){var i,o=s(t),r=h(o.length),a=function(t,e){return(t=l(t))<0?f(t+e,0):x(t,e)}(n,r);if(g&&e!=e){for(;r>a;)if((i=o[a++])!=i)return!0}else for(;r>a;a++)if((g||a in o)&&o[a]===e)return g||a||0;return!g&&-1}),S=C("IE_PROTO"),T=function(t,e){var n,o=s(t),r=0,a=[];for(n in o)n!=S&&i(o,n)&&a.push(n);for(;e.length>r;)i(o,n=e[r++])&&(~P(a,n)||a.push(n));return a},M="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),O=Object.keys||function(t){return T(t,M)},N=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},j=function(t,e,n){if(N(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}},B=function(t){return"object"==typeof t?null!==t:"function"==typeof t},A=function(t){if(!B(t))throw TypeError(t+" is not an object!");return t},H=function(t){try{return!!t()}catch(t){return!0}},L=!H(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),I=b.document,z=B(I)&&B(I.createElement),F=function(t){return z?I.createElement(t):{}},D=!L&&!H(function(){return 7!=Object.defineProperty(F("div"),"a",{get:function(){return 7}}).a}),R=function(t,e){if(!B(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!B(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!B(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!B(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},W=Object.defineProperty,G={f:L?Object.defineProperty:function(t,e,n){if(A(t),e=R(e,!0),A(n),D)try{return W(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},Y=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},$=L?function(t,e,n){return G.f(t,e,Y(1,n))}:function(t,e,n){return t[e]=n,t},U=function(t,e,n){var o,r,a,s=t&U.F,p=t&U.G,c=t&U.S,l=t&U.P,u=t&U.B,h=t&U.W,f=p?m:m[e]||(m[e]={}),x=f.prototype,d=p?b:c?b[e]:(b[e]||{}).prototype;for(o in p&&(n=e),n)(r=!s&&d&&void 0!==d[o])&&i(f,o)||(a=r?d[o]:n[o],f[o]=p&&"function"!=typeof d[o]?n[o]:u&&r?j(a,b):h&&d[o]==a?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(a):l&&"function"==typeof a?j(Function.call,a):a,l&&((f.virtual||(f.virtual={}))[o]=a,t&U.R&&x&&!x[o]&&$(x,o,a)))};U.F=1,U.G=2,U.S=4,U.P=8,U.B=16,U.W=32,U.U=64,U.R=128;var q=U,V=function(t,e){var n=(m.Object||{})[t]||Object[t],i={};i[t]=e(n),q(q.S+q.F*H(function(){n(1)}),"Object",i)};V("keys",function(){return function(t){return O(e(t))}});var K=m.Object.keys;var Z=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};q(q.S+q.F*!L,"Object",{defineProperty:G.f});var J=m.Object,X=function(t,e,n){return J.defineProperty(t,e,n)};function Q(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),X(t,i.key,i)}}var tt=function(t,e,n){return e&&Q(t.prototype,e),n&&Q(t,n),t},et=$,nt={},it=L?Object.defineProperties:function(t,e){A(t);for(var n,i=O(e),o=i.length,r=0;o>r;)G.f(t,n=i[r++],e[n]);return t},ot=b.document,rt=ot&&ot.documentElement,at=C("IE_PROTO"),st=function(){},pt=function(){var t,e=F("iframe"),n=M.length;for(e.style.display="none",rt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),pt=t.F;n--;)delete pt.prototype[M[n]];return pt()},ct=Object.create||function(t,e){var n;return null!==t?(st.prototype=A(t),n=new st,st.prototype=null,n[at]=t):n=pt(),void 0===e?n:it(n,e)},lt=_(function(t){var e=v("wks"),n=b.Symbol,i="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=i&&n[t]||(i?n:w)("Symbol."+t))}).store=e}),ut=G.f,ht=lt("toStringTag"),ft=function(t,e,n){t&&!i(t=n?t:t.prototype,ht)&&ut(t,ht,{configurable:!0,value:e})},xt={};$(xt,lt("iterator"),function(){return this});var dt=C("IE_PROTO"),_t=Object.prototype,gt=Object.getPrototypeOf||function(t){return t=e(t),i(t,dt)?t[dt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?_t:null},mt=lt("iterator"),bt=!([].keys&&"next"in[].keys()),vt=function(){return this},yt=function(t,e,n,i,o,r,a){!function(t,e,n){t.prototype=ct(xt,{next:Y(1,n)}),ft(t,e+" Iterator")}(n,e,i);var s,p,c,l=function(t){if(!bt&&t in x)return x[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},u=e+" Iterator",h="values"==o,f=!1,x=t.prototype,d=x[mt]||x["@@iterator"]||o&&x[o],_=d||l(o),g=o?h?l("entries"):_:void 0,m="Array"==e&&x.entries||d;if(m&&(c=gt(m.call(new t)))!==Object.prototype&&c.next&&ft(c,u,!0),h&&d&&"values"!==d.name&&(f=!0,_=function(){return d.call(this)}),!a||!bt&&!f&&x[mt]||$(x,mt,_),nt[e]=_,nt[u]=vt,o)if(s={values:h?_:l("values"),keys:r?_:l("keys"),entries:g},a)for(p in s)p in x||et(x,p,s[p]);else q(q.P+q.F*(bt||f),e,s);return s},kt=function(e){return function(n,i){var o,r,a=String(t(n)),s=l(i),p=a.length;return s<0||s>=p?e?"":void 0:(o=a.charCodeAt(s))<55296||o>56319||s+1===p||(r=a.charCodeAt(s+1))<56320||r>57343?e?a.charAt(s):o:e?a.slice(s,s+2):r-56320+(o-55296<<10)+65536}}(!0);yt(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=kt(e,n),this._i+=t.length,{value:t,done:!1})});var wt=function(t,e){return{value:e,done:!!t}};yt(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,wt(1)):wt(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");nt.Arguments=nt.Array;for(var Et=lt("toStringTag"),Ct="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Pt=0;Pt<Ct.length;Pt++){var St=Ct[Pt],Tt=b[St],Mt=Tt&&Tt.prototype;Mt&&!Mt[Et]&&$(Mt,Et,St),nt[St]=nt.Array}var Ot={f:lt},Nt=Ot.f("iterator"),jt=_(function(t){var e=w("meta"),n=G.f,o=0,r=Object.isExtensible||function(){return!0},a=!H(function(){return r(Object.preventExtensions({}))}),s=function(t){n(t,e,{value:{i:"O"+ ++o,w:{}}})},p=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!B(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,e)){if(!r(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!i(t,e)){if(!r(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){return a&&p.NEED&&r(t)&&!i(t,e)&&s(t),t}}}),Bt=(jt.KEY,jt.NEED,jt.fastKey,jt.getWeak,jt.onFreeze,G.f),At=function(t){var e=m.Symbol||(m.Symbol={});"_"==t.charAt(0)||t in e||Bt(e,t,{value:Ot.f(t)})},Ht={f:Object.getOwnPropertySymbols},Lt={f:{}.propertyIsEnumerable},It=Array.isArray||function(t){return"Array"==r(t)},zt=M.concat("length","prototype"),Ft={f:Object.getOwnPropertyNames||function(t){return T(t,zt)}},Dt=Ft.f,Rt={}.toString,Wt="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Gt={f:function(t){return Wt&&"[object Window]"==Rt.call(t)?function(t){try{return Dt(t)}catch(t){return Wt.slice()}}(t):Dt(s(t))}},Yt=Object.getOwnPropertyDescriptor,$t={f:L?Yt:function(t,e){if(t=s(t),e=R(e,!0),D)try{return Yt(t,e)}catch(t){}if(i(t,e))return Y(!Lt.f.call(t,e),t[e])}},Ut=jt.KEY,qt=$t.f,Vt=G.f,Kt=Gt.f,Zt=b.Symbol,Jt=b.JSON,Xt=Jt&&Jt.stringify,Qt=lt("_hidden"),te=lt("toPrimitive"),ee={}.propertyIsEnumerable,ne=v("symbol-registry"),ie=v("symbols"),oe=v("op-symbols"),re=Object.prototype,ae="function"==typeof Zt,se=b.QObject,pe=!se||!se.prototype||!se.prototype.findChild,ce=L&&H(function(){return 7!=ct(Vt({},"a",{get:function(){return Vt(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=qt(re,e);i&&delete re[e],Vt(t,e,n),i&&t!==re&&Vt(re,e,i)}:Vt,le=function(t){var e=ie[t]=ct(Zt.prototype);return e._k=t,e},ue=ae&&"symbol"==typeof Zt.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Zt},he=function(t,e,n){return t===re&&he(oe,e,n),A(t),e=R(e,!0),A(n),i(ie,e)?(n.enumerable?(i(t,Qt)&&t[Qt][e]&&(t[Qt][e]=!1),n=ct(n,{enumerable:Y(0,!1)})):(i(t,Qt)||Vt(t,Qt,Y(1,{})),t[Qt][e]=!0),ce(t,e,n)):Vt(t,e,n)},fe=function(t,e){A(t);for(var n,i=function(t){var e=O(t),n=Ht.f;if(n)for(var i,o=n(t),r=Lt.f,a=0;o.length>a;)r.call(t,i=o[a++])&&e.push(i);return e}(e=s(e)),o=0,r=i.length;r>o;)he(t,n=i[o++],e[n]);return t},xe=function(t){var e=ee.call(this,t=R(t,!0));return!(this===re&&i(ie,t)&&!i(oe,t))&&(!(e||!i(this,t)||!i(ie,t)||i(this,Qt)&&this[Qt][t])||e)},de=function(t,e){if(t=s(t),e=R(e,!0),t!==re||!i(ie,e)||i(oe,e)){var n=qt(t,e);return!n||!i(ie,e)||i(t,Qt)&&t[Qt][e]||(n.enumerable=!0),n}},_e=function(t){for(var e,n=Kt(s(t)),o=[],r=0;n.length>r;)i(ie,e=n[r++])||e==Qt||e==Ut||o.push(e);return o},ge=function(t){for(var e,n=t===re,o=Kt(n?oe:s(t)),r=[],a=0;o.length>a;)!i(ie,e=o[a++])||n&&!i(re,e)||r.push(ie[e]);return r};ae||(et((Zt=function(){if(this instanceof Zt)throw TypeError("Symbol is not a constructor!");var t=w(arguments.length>0?arguments[0]:void 0),e=function(n){this===re&&e.call(oe,n),i(this,Qt)&&i(this[Qt],t)&&(this[Qt][t]=!1),ce(this,t,Y(1,n))};return L&&pe&&ce(re,t,{configurable:!0,set:e}),le(t)}).prototype,"toString",function(){return this._k}),$t.f=de,G.f=he,Ft.f=Gt.f=_e,Lt.f=xe,Ht.f=ge,Ot.f=function(t){return le(lt(t))}),q(q.G+q.W+q.F*!ae,{Symbol:Zt});for(var me="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),be=0;me.length>be;)lt(me[be++]);for(var ve=O(lt.store),ye=0;ve.length>ye;)At(ve[ye++]);q(q.S+q.F*!ae,"Symbol",{for:function(t){return i(ne,t+="")?ne[t]:ne[t]=Zt(t)},keyFor:function(t){if(!ue(t))throw TypeError(t+" is not a symbol!");for(var e in ne)if(ne[e]===t)return e},useSetter:function(){pe=!0},useSimple:function(){pe=!1}}),q(q.S+q.F*!ae,"Object",{create:function(t,e){return void 0===e?ct(t):fe(ct(t),e)},defineProperty:he,defineProperties:fe,getOwnPropertyDescriptor:de,getOwnPropertyNames:_e,getOwnPropertySymbols:ge}),Jt&&q(q.S+q.F*(!ae||H(function(){var t=Zt();return"[null]"!=Xt([t])||"{}"!=Xt({a:t})||"{}"!=Xt(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(n=e=i[1],(B(e)||void 0!==t)&&!ue(t))return It(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!ue(e))return e}),i[1]=e,Xt.apply(Jt,i)}}),Zt.prototype[te]||$(Zt.prototype,te,Zt.prototype.valueOf),ft(Zt,"Symbol"),ft(Math,"Math",!0),ft(b.JSON,"JSON",!0),At("asyncIterator"),At("observable");var ke=m.Symbol,we=_(function(t){function e(t){return(e="function"==typeof ke&&"symbol"==typeof Nt?function(t){return typeof t}:function(t){return t&&"function"==typeof ke&&t.constructor===ke&&t!==ke.prototype?"symbol":typeof t})(t)}function n(i){return"function"==typeof ke&&"symbol"===e(Nt)?t.exports=n=function(t){return e(t)}:t.exports=n=function(t){return t&&"function"==typeof ke&&t.constructor===ke&&t!==ke.prototype?"symbol":e(t)},n(i)}t.exports=n});var Ee=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};var Ce=function(t,e){return!e||"object"!==we(e)&&"function"!=typeof e?Ee(t):e};V("getPrototypeOf",function(){return function(t){return gt(e(t))}});var Pe=m.Object.getPrototypeOf,Se=function(t,e){if(A(t),!B(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},Te={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=j(Function.call,$t.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return Se(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:Se};q(q.S,"Object",{setPrototypeOf:Te.set});var Me=m.Object.setPrototypeOf,Oe=_(function(t){function e(n){return t.exports=e=Me?Pe:function(t){return t.__proto__||Pe(t)},e(n)}t.exports=e});q(q.S,"Object",{create:ct});var Ne=m.Object,je=function(t,e){return Ne.create(t,e)},Be=_(function(t){function e(n,i){return t.exports=e=Me||function(t,e){return t.__proto__=e,t},e(n,i)}t.exports=e});var Ae=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=je(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Be(t,e)};var He,Le,Ie=function(t,e,n){return e in t?X(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},ze="pilot_happix_noti_showed_timestamp",Fe="https://s.pixfs.net/common/pixhappix-ui-module/images",De=400222080391957,Re="CLOUDY",We="RAINY",Ge="SUNNY",Ye=(Ie(He={},Re,"".concat(Fe,"/weather_cloud.svg")),Ie(He,We,"".concat(Fe,"/weather_rain.svg")),Ie(He,Ge,"".concat(Fe,"/weather_sun.svg")),He),$e=(Ie(Le={},Re,"陰天還是要防曬唷～"),Ie(Le,We,"出門記得帶把傘！"),Ie(Le,Ge,"今天是晴朗的好天氣"),Le),Ue={$prefix:"pixnet-happix-pilot",$mobile_screen_max_width:"768px",$desktop_screen_min_width:"769px",$big_happix_w:"70px",$big_happix_h:"80px",$color_white:"#ffffff",$color_black:"#000000",$color_grey:"#e9e9e9",$color_light_grey:"#f6f6f6",$color_deep_grey:"#4a4a4a",$color_font_grey:"#5e5f6a",$color_red:"#ff6868",$color_dark_red:"#f65f5e",$color_light_orange:"#fe7c46",$color_orange:"#f04e2f",$color_blue:"#6eacf5",$color_light_blue:"#00aef0",$color_deep_blue:"#4257ac",$color_dark_blue:"#4a90e2",$color_box_shadow:"rgba(0, 0, 0, 0.25)",$messenger_card_border_radius:"20px",$card_content_padding:"15px",$launcher_bar_height:"45px",$img_path_prefix:Fe},qe=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Z(this,t),this.containerElement=e,this.props=n}return tt(t,[{key:"getCssPrefix",value:function(){return Ue.$prefix}}]),t}(),Ve={wrapper:function(t){return{isEmpty:function(){return void 0===t},getElement:function(){return t},getElementByPostfix:function(e){return Ve.wrapper(t.querySelector(".".concat(Ue.$prefix,"__").concat(e)))},getElementBySelector:function(e){return Ve.wrapper(t.querySelector(e))},getParentNode:function(){return Ve.wrapper(t.parentNode)},getDataset:function(){return t.dataset},hasClass:function(e){return t.classList.contains(e)},addClass:function(e){return t.classList.add(e),this},removeClass:function(e){return t.classList.remove(e),this},toggleClass:function(e){return t.classList.toggle(e),this},appendChild:function(e){return t.appendChild(e),this},setHTML:function(e){return t.innerHTML=e,this},setStyle:function(e,n){return t.style[e]=n,this},bindEvent:function(e,n){return t.addEventListener(e,n),this},unbindEvent:function(e,n){return t.removeEventListener(e,n),this},fireEvent:function(e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)},scrollToTop:function(){t.scrollTop=0}}},getElementByPostfix:function(t){return Ve.getElementBySelector(".".concat(Ue.$prefix,"__").concat(t))},getElementBySelector:function(t){return Ve.wrapper(document.querySelector(t))},createElement:function(t){var e=document.createElement("div");e.innerHTML=t;var n=document.createDocumentFragment();return Array.prototype.slice.apply(e.childNodes).map(function(t){return n.appendChild(t)}),n}},Ke=$t.f;V("getOwnPropertyDescriptor",function(){return function(t,e){return Ke(s(t),e)}});var Ze=m.Object,Je=function(t,e){return Ze.getOwnPropertyDescriptor(t,e)},Xe=m.Object.getOwnPropertySymbols;var Qe=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=K(n);"function"==typeof Xe&&(i=i.concat(Xe(n).filter(function(t){return Je(n,t).enumerable}))),i.forEach(function(e){Ie(t,e,n[e])})}return t},tn=["isIncludeGAScript","isIncludePAScript"],en={currentOptions:{variant:"",projectName:"",domainAppend:"",loginURL:"",logoutURL:"",memberUniqid:"",giftNotificationContent:{},ga:{isIncludePAScript:!0,trackingId:""},pa:{isIncludePAScript:!0,venue:""},style:{width:{pilotWidth:960},zIndex:{pilotZIndex:2},bubbleFixedPosition:{left:null,right:null,top:null,bottom:null}}},isInvalidConfig:function(t,e){return!t.hasOwnProperty(e)&&-1===tn.indexOf(e)},setOptions:function(t){if(!t)throw new Error("ERROR: PixHappixPilot options are required.");if(!t instanceof Object)throw new Error("ERROR: PixHappixPilot options should be json object.");!function t(e,n,i){return K(n).forEach(function(o){var r=e?e+".":"";en.isInvalidConfig(i,o),i[o]instanceof Object&&t("".concat(r).concat(o),n[o],i[o])})}("",en.currentOptions,t),en.currentOptions=Qe({},en.currentOptions,t)},getOptions:function(){return{getVariant:function(){return en.currentOptions.variant},getProjectName:function(){return en.currentOptions.projectName},getDomainAppend:function(){return en.currentOptions.domainAppend},getLoginURL:function(){return en.currentOptions.loginURL},getLogoutURL:function(){return en.currentOptions.logoutURL},getMemberUniqid:function(){return en.currentOptions.memberUniqid},getGiftNotificationContent:function(){return en.currentOptions.giftNotificationContent},getTrackingId:function(){return en.currentOptions.ga.trackingId},isIncludeGAScript:function(){return en.currentOptions.ga.isIncludeGAScript},getVenue:function(){return en.currentOptions.pa.venue},isIncludePAScript:function(){return en.currentOptions.pa.isIncludePAScript},getPilotWidth:function(){return en.currentOptions.style.width.pilotWidth},getPilotZIndex:function(){return en.currentOptions.style.zIndex.pilotZIndex},getBubbleFixedPosition:function(){return en.currentOptions.style.bubbleFixedPosition||{}}}}},nn=function(){var t,e,n,i,o;"undefined"==typeof ga&&(t=window,e=document,n="script","ga",t.GoogleAnalyticsObject="ga",t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=1*new Date,i=e.createElement(n),o=e.getElementsByTagName(n)[0],i.async=1,i.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(i,o))},on=function(t){ga("create",t,"auto","pixnetHappixPilot")},rn=function(t,e){ga("create",t,"auto","CTATracker"),ga("CTATracker.set","userId",e)},an=function(t,e){var n,i,o,r;"undefined"==typeof _piq&&(i="script",o=(n=document).getElementsByTagName(i)[0],(r=n.createElement(i)).async=1,r.src="https://s.pixanalytics.com/js/pi.min.js",o.parentNode.insertBefore(r,o))},sn=function(t){ga("pixnetHappixPilot.set","userId",t)},pn=function(t){"undefined"!=typeof ga&&ga("pixnetHappixPilot.send","event",t.category,t.action,t.label,t.id),"undefined"!=typeof _piq&&_piq.push(["trackEvent",t.category,t.action,t.label,t.id])},cn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=en.getOptions().getGiftNotificationContent().project_id+"_CTA";"undefined"!=typeof ga&&ga("CTATracker.send","event",n,t,e),"undefined"!=typeof _piq&&_piq.push(["trackEvent",n,t,e])},ln=function(t){(new Image).src=t},un=function(t,e,n){var i="?with=".concat(e,"&height=").concat(n,"&url=").concat(encodeURIComponent(t));return"".concat("https://imageproxy.pimg.tw/zoomcrop").concat(i)};function hn(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}hn('@media screen and (max-width:768px){.pixnet-happix-pilot__sticky-box{position:fixed;right:0;bottom:45px;left:0;width:100vw;height:100px;font-family:PingFang TC;color:#000;background:#fff;border-radius:10px 10px 0 0;will-change:transform;-webkit-transform:translateY(100%);transform:translateY(100%);-webkit-transition:-webkit-transform .5s;transition:-webkit-transform .5s;transition:transform .5s;transition:transform .5s,-webkit-transform .5s}.pixnet-happix-pilot__sticky-box a{text-decoration:none}.pixnet-happix-pilot__sticky-box.show{-webkit-box-shadow:0 0 20px rgba(0,0,0,.25);box-shadow:0 0 20px rgba(0,0,0,.25);-webkit-transform:translateY(0);transform:translateY(0)}.pixnet-happix-pilot__sticky-box__link--title{-ms-flex-line-pack:center;align-content:center;overflow:hidden;width:calc(100% - 44px);height:24px;padding-top:5px;padding-left:10px;font-weight:500;font-size:17px;line-height:24px;letter-spacing:1px}.pixnet-happix-pilot__sticky-box__link--title,.pixnet-happix-pilot__sticky-box__link__img{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.pixnet-happix-pilot__sticky-box__link__img{justify-items:center;margin-right:3px;border-radius:50%;background-color:#f6f6f6}.pixnet-happix-pilot__sticky-box__title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pixnet-happix-pilot__sticky-box__img{width:55px!important;height:55px!important;margin:6px 10px 10px!important;border-radius:10px}.pixnet-happix-pilot__sticky-box__info--description{position:absolute;top:33px;width:calc(100% - 40px);font-size:13px!important;letter-spacing:1px;color:#5e5f6a!important;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pixnet-happix-pilot__sticky-box__link--description{margin-top:2px;top:33px}.pixnet-happix-pilot__sticky-box__price{position:absolute;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;bottom:8px;left:75px}.pixnet-happix-pilot__sticky-box__price div{pointer-events:none}.pixnet-happix-pilot__sticky-box__price>div:nth-child(2){margin-right:12px;line-height:10px}.pixnet-happix-pilot__sticky-box__price>div>strike{font-size:10px!important;color:#5e5f6a!important}.pixnet-happix-pilot__sticky-box__price>div>span:first-child{font-size:16px!important;margin-right:5px;color:#f65f5e!important;font-weight:600}.pixnet-happix-pilot__sticky-box__price>div>span:nth-child(2){font-size:10px!important;color:#5e5f6a!important}.pixnet-happix-pilot__sticky-box__button{position:absolute;right:10px;bottom:10px;padding:8px 27px;font-weight:500;font-size:15px;letter-spacing:1px;color:#fff;background-color:#00aef0;border-radius:6px}.pixnet-happix-pilot__sticky-box__close{position:absolute;top:0;right:0;width:42px;height:42px;color:transparent;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_close.svg) 100% 0}.pixnet-happix-pilot__sticky-box__info{padding-left:30px;font-size:17px;line-height:2;color:#f04e2f;background:transparent 5px no-repeat}.pixnet-happix-pilot__sticky-box__link--button{position:absolute;right:10px;bottom:10px;width:120px;height:36px;font-size:13px;color:#fff;background-color:#f04e2f;border-radius:6px}.pixnet-happix-pilot__sticky-box__btn{display:inline-block;width:120px;height:36px;font-weight:500;font-size:15px;line-height:36px;letter-spacing:1px;text-align:center}.pixnet-happix-pilot__sticky-box__info--date,.pixnet-happix-pilot__sticky-box__info--people,.pixnet-happix-pilot__sticky-box__link--description,.pixnet-happix-pilot__sticky-box__link--price,.pixnet-happix-pilot__sticky-box__link--title{color:inherit;top:33px}.pixnet-happix-pilot__sticky-box__btn--red{background-color:#f04e2f}.pixnet-happix-pilot__sticky-box__btn--blue{background-color:#00aef0}}@media screen and (min-width:769px){.pixnet-happix-pilot__sticky-box{position:fixed;right:calc(50% - 452px);bottom:65px;z-index:1;width:360px;max-width:100vw;height:120px;font-family:PingFang TC;color:#000;background:#fff;border-radius:10px;will-change:transform;-webkit-transform:translateY(200px);transform:translateY(200px);-webkit-transition:-webkit-transform .5s;transition:-webkit-transform .5s;transition:transform .5s;transition:transform .5s,-webkit-transform .5s;cursor:pointer}.pixnet-happix-pilot__sticky-box:after{content:"";position:absolute;right:40px;bottom:-20px;width:20px;height:20px;background-image:url(https://s.pixfs.net/common/pixhappix-ui-module/images/cta_triangle_white.svg)}.pixnet-happix-pilot__sticky-box a{text-decoration:none}.pixnet-happix-pilot__sticky-box.show{-webkit-box-shadow:0 0 20px rgba(0,0,0,.25);box-shadow:0 0 20px rgba(0,0,0,.25);-webkit-transform:translateY(0);transform:translateY(0)}.pixnet-happix-pilot__sticky-box__link--title{-ms-flex-line-pack:center;align-content:center;overflow:hidden;width:calc(100% - 50px);height:24px;padding-top:12px;padding-left:15px;font-weight:500;font-size:17px;line-height:24px;letter-spacing:1px}.pixnet-happix-pilot__sticky-box__link--title,.pixnet-happix-pilot__sticky-box__link__img{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.pixnet-happix-pilot__sticky-box__link__img{justify-items:center;margin-right:3px;border-radius:50%;background-color:#f6f6f6}.pixnet-happix-pilot__sticky-box__title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pixnet-happix-pilot__sticky-box__img{width:66px!important;height:66px!important;margin:5px 15px 15px!important;border-radius:10px}.pixnet-happix-pilot__sticky-box__info--description{position:absolute;top:33px;width:calc(100% - 55px);font-size:13px!important;letter-spacing:1px;color:#5e5f6a!important;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pixnet-happix-pilot__sticky-box__link--description{margin-top:2px}.pixnet-happix-pilot__sticky-box__price{position:absolute;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;bottom:8px}.pixnet-happix-pilot__sticky-box__price div{pointer-events:none}.pixnet-happix-pilot__sticky-box__price>div:nth-child(2){margin-right:12px;line-height:10px}.pixnet-happix-pilot__sticky-box__price>div>strike{font-size:10px!important;color:#5e5f6a!important}.pixnet-happix-pilot__sticky-box__price>div>span:first-child{font-size:16px!important;margin-right:5px;color:#f65f5e!important;font-weight:600}.pixnet-happix-pilot__sticky-box__price>div>span:nth-child(2){font-size:10px!important;color:#5e5f6a!important}.pixnet-happix-pilot__sticky-box__button{position:absolute;right:10px;bottom:10px;padding:10px 25px;font-weight:500;font-size:15px;letter-spacing:1px;color:#fff;background-color:#00aef0;border-radius:6px}.pixnet-happix-pilot__sticky-box__close{position:absolute;top:0;right:0;width:42px;height:42px;padding-top:4px;color:transparent;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_close.svg) 100% 0}.pixnet-happix-pilot__sticky-box__info{padding-left:30px;font-size:17px;line-height:2;color:#f04e2f;background:transparent 5px no-repeat}.pixnet-happix-pilot__sticky-box__link--button{position:absolute;right:30px;bottom:15px;width:120px;height:36px;font-size:13px;color:#fff;background-color:#f04e2f;border-radius:6px;cursor:pointer}.pixnet-happix-pilot__sticky-box__btn{display:inline-block;width:120px;height:36px;font-weight:500;font-size:15px;line-height:36px;letter-spacing:1px;text-align:center}.pixnet-happix-pilot__sticky-box__info--date,.pixnet-happix-pilot__sticky-box__info--people,.pixnet-happix-pilot__sticky-box__link--description,.pixnet-happix-pilot__sticky-box__link--price,.pixnet-happix-pilot__sticky-box__link--title{color:inherit}.pixnet-happix-pilot__sticky-box__btn--red{background-color:#f04e2f}.pixnet-happix-pilot__sticky-box__btn--blue{background-color:#00aef0}}');var fn=function(t){function e(t,n){var i;return Z(this,e),(i=Ce(this,Oe(e).call(this,t))).isSendCTAViewEvent=!1,i.giftNotification=n||{},i.giftNotificationContent=i.giftNotification.widget_content||{},i.ga=i.giftNotificationContent.ga||"",i.id=i.giftNotification.project_id,i.handleNavigate=i.handleNavigate.bind(Ee(Ee(i))),i.bindCTAClickEvent=i.bindCTAClickEvent.bind(Ee(Ee(i))),i.openNewWindow=i.openNewWindow.bind(Ee(Ee(i))),i}return Ae(e,qe),tt(e,[{key:"getTemplate",value:function(){var t=this.getCssPrefix(),e=this.giftNotificationContent.img_link||"",n=this.giftNotificationContent.title||"",i=this.giftNotificationContent.description||"",o=this.giftNotificationContent.button_name||"",r=this.giftNotificationContent.link,a="",s="",p="";return e&&(a='<a class="'.concat(t,'__sticky-box__link--img" href="').concat(r,'" target="_blank" rel="nofollow noopener">\n                        <img src="').concat(un(e,80,80),'" class="').concat(t,'__sticky-box__img" style="float:left;margin:10px;width:80px;height:80px;">\n                    </a>')),i&&(s='<a class="'.concat(t,'__sticky-box__link--description" href="').concat(r,'" target="_blank" rel="nofollow noopener">\n                        <span class="').concat(t,'__sticky-box__info--description" style="font-size:12px;color:#999;">').concat(i,"</span>\n                    </a>")),o&&(p='<a href="'.concat(r,'" class="').concat(t,'__sticky-box__button" target="_blank" rel="nofollow noopener">\n                ').concat(o,"\n            </a>")),'<div class="'.concat(t,"__sticky-box ").concat(t,'__sticky-box" data-title="').concat(n,'" data-img-link="').concat(e,'" data-description="').concat(i,'" data-link="').concat(r,'" data-button-name="').concat(o,'">\n            <a class="').concat(t,'__sticky-box__link--title" href="').concat(r,'" target="_blank" rel="nofollow noopener">\n                <div class="').concat(t,'__sticky-box__link__img"><img src="').concat(Fe,'/btn_gift_cta_y.svg" width="18" height="18"/></div>\n                <div class="').concat(t,'__sticky-box__title" style="height:auto;">').concat(n,"</div>\n            </a>\n            ").concat(a,"\n            ").concat(s,"\n            ").concat(this.getContentTemplate(),'\n            <div class="').concat(t,'__sticky-box__close"></div>\n            ').concat(p,"\n        </div>")}},{key:"getContentTemplate",value:function(){var t=this.getCssPrefix(),e=this.giftNotificationContent.html||"",n=this.giftNotificationContent.original_price||"",i=this.giftNotificationContent.price||"",o="";return i&&"0"!==i?(""!==n&&"0"!==n&&(o="<div></div><div><strike>".concat(n,"</strike></div>")),'\n                <a class="'.concat(t,'__sticky-box__price" href="').concat(this.giftNotificationContent.link,'" target="_blank" rel="nofollow noopener">\n                    ').concat(o,"\n                    <div>\n                        <span>").concat(i,"</span><span>起</span>\n                    </div>\n                </a>\n            ")):e?'\n                <a class="'.concat(t,'__sticky-box__price" href="').concat(this.giftNotificationContent.link,'" target="_blank" rel="nofollow noopener">\n                    ').concat(e,"\n                </a>\n            "):""}},{key:"getElements",value:function(){this.giftNotificationElement=Ve.getElementByPostfix("sticky-box"),this.closeButtonElement=this.giftNotificationElement.getElementByPostfix("sticky-box__close")}},{key:"bindEvents",value:function(){this.giftNotificationElement.bindEvent("click",this.bindCTAClickEvent)}},{key:"bindCTAClickEvent",value:function(t){var e=t.target;if("pixnet-happix-pilot__sticky-box__close"===e.className)return this.containerElement.fireEvent("close"),this.giftNotificationElement.removeClass("show"),cn("CTA_Close"),void ln("".concat(this.giftNotification.click_link,"?position=close"));var n={title:["CTA_Click_Title","title"],price:["CTA_Click_Price","other"],btn:["CTA_Click_Button","button"],img:["CTA_Click_Image","image"],description:["CTA_Click_Description","description"],button:["CTA_Click_Button","button"]},i="CTA_Click_other",o="other";for(var r in n)if(0<=e.className.indexOf(r)){i=n[r][0],o=n[r][1];break}this.giftNotificationContent.link?(cn(i),ln("".concat(this.giftNotification.click_link,"?position=").concat(o)),"CTA_Click_other"===i&&(this.openNewWindow(this.giftNotificationContent.link),t.preventDefault())):t.preventDefault()}},{key:"handleNavigate",value:function(){var t=this.giftNotificationContent.link;t&&window.open(t+"?utm_medium=-new","_blank")}},{key:"openNewWindow",value:function(t){var e=document.createElement("a");e.href=t,e.target="_blank",e.rel="noopener",e.click()}},{key:"hide",value:function(){return this.giftNotificationElement.removeClass("show"),this}},{key:"show",value:function(){return this.giftNotificationElement.addClass("show"),this.isSendCTAViewEvent||(cn("CTA_View"),pn({category:"pilot-CTA",action:"giftView"}),ln("".concat(this.giftNotification.pv_link)),this.isSendCTAViewEvent=!0),this}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplate()),this.getElements(),this.bindEvents(),this.giftNotification.pv_load_link&&ln("".concat(this.giftNotification.pv_load_link)),this}}]),e}();hn("@media screen and (max-width:768px){.pixnet-happix-pilot__happix-notification{position:fixed;right:10px;bottom:47px;left:10px;width:calc(100% - 20px);margin:auto}.pixnet-happix-pilot__happix-notification.hidden{opacity:0;-webkit-transform:translateY(52px);transform:translateY(52px)}.pixnet-happix-pilot__happix-notification__wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:50px;background:rgba(0,0,0,.8);border-radius:20px;cursor:pointer}.pixnet-happix-pilot__happix-notification__icon-container{position:relative;width:58px;-ms-flex-item-align:end;align-self:flex-end}.pixnet-happix-pilot__happix-notification__icon-container>*{position:absolute;bottom:-12px;left:-9px;width:70px}.pixnet-happix-pilot__happix-notification__message{-webkit-box-flex:1;-ms-flex:1;flex:1;max-height:36px;color:#fff;font-family:PingFang TC;font-size:13px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.9px;text-overflow:clip}.pixnet-happix-pilot__happix-notification__separator{height:25px;margin-left:11px;border-left:1px solid hsla(0,0%,100%,.2)}.pixnet-happix-pilot__happix-notification__close-button{width:20px;margin-right:15px;margin-left:15px;cursor:pointer}}@media screen and (min-width:769px){.pixnet-happix-pilot__happix-notification{position:fixed;right:0;bottom:48px;left:0;width:100%;margin:auto;-webkit-transition:all .4s;transition:all .4s}.pixnet-happix-pilot__happix-notification.hidden{opacity:0;-webkit-transform:translateY(52px);transform:translateY(52px)}.pixnet-happix-pilot__happix-notification__wrapper{position:absolute;right:0;bottom:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:300px;height:50px;background:rgba(0,0,0,.8);border-radius:20px;cursor:pointer}.pixnet-happix-pilot__happix-notification__icon-container{position:relative;width:58px;-ms-flex-item-align:end;align-self:flex-end}.pixnet-happix-pilot__happix-notification__icon-container>*{position:absolute;bottom:-12px;left:-9px;width:70px}.pixnet-happix-pilot__happix-notification__message{-webkit-box-flex:1;-ms-flex:1;flex:1;max-height:36px;color:#fff;font-family:PingFang TC;font-size:13px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.9px;text-overflow:clip}.pixnet-happix-pilot__happix-notification__separator{height:25px;margin-left:11px;border-left:1px solid hsla(0,0%,100%,.2)}.pixnet-happix-pilot__happix-notification__close-button{width:20px;margin-right:15px;margin-left:15px;cursor:pointer}}");var xn=function(t){function e(t){return Z(this,e),Ce(this,Oe(e).call(this,t))}return Ae(e,qe),tt(e,[{key:"getTemplates",value:function(){var t=this.getCssPrefix();return'\n            <div\n                class="'.concat(t,'__happix-notification hidden"\n                style="max-width: ').concat(en.getOptions().getPilotWidth(),'px"\n            >\n                <div class="').concat(t,'__happix-notification__wrapper">\n                    <div class="').concat(t,'__happix-notification__icon-container">\n                        <img\n                            src="').concat(Fe,'/btn-happix-ufo.png"\n                            srcset="').concat(Fe,"/btn-happix-ufo@2x.png 2x,\n                                ").concat(Fe,'/btn-happix-ufo@3x.png 3x"\n                        />\n                    </div>\n                    <div class="').concat(t,'__happix-notification__message"></div>\n                    <div class="').concat(t,'__happix-notification__separator"></div>\n                    <img\n                        class="').concat(t,'__happix-notification__close-button"\n                        src="').concat(Fe,'/btn_close_alpha_v2.svg"\n                    />\n                </div>\n            </div>\n        ')}},{key:"getElements",value:function(){this.happixNotificationElement=Ve.getElementByPostfix("happix-notification"),this.closeButtonElement=this.happixNotificationElement.getElementByPostfix("happix-notification__close-button"),this.happixMessage=this.happixNotificationElement.getElementByPostfix("happix-notification__message")}},{key:"bindEvents",value:function(){var t=this;this.closeButtonElement.bindEvent("click",function(e){t.containerElement.fireEvent("close"),e.stopPropagation()}),this.happixNotificationElement.bindEvent("click",function(){t.containerElement.fireEvent("click")})}},{key:"hide",value:function(){return this.happixNotificationElement.addClass("hidden"),this}},{key:"show",value:function(){return this.happixNotificationElement.setStyle("transition","all .4s").removeClass("hidden"),this}},{key:"setMessage",value:function(t){this.happixMessage.setHTML(t)}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplates()),this.getElements(),this.bindEvents(),this}}]),e}(),dn=Object.assign,_n=!dn||H(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=dn({},t)[n]||Object.keys(dn({},e)).join("")!=i})?function(t,n){for(var i=e(t),o=arguments.length,r=1,s=Ht.f,p=Lt.f;o>r;)for(var c,l=a(arguments[r++]),u=s?O(l).concat(s(l)):O(l),h=u.length,f=0;h>f;)p.call(l,c=u[f++])&&(i[c]=l[c]);return i}:dn;q(q.S+q.F,"Object",{assign:_n});var gn=m.Object.assign,mn=_(function(t,e){!function(){var n="object"==typeof self&&self.self===self&&self||"object"==typeof d&&d.global===d&&d||this||{},i=n._,o=Array.prototype,r=Object.prototype,a="undefined"!=typeof Symbol?Symbol.prototype:null,s=o.push,p=o.slice,c=r.toString,l=r.hasOwnProperty,u=Array.isArray,h=Object.keys,f=Object.create,x=function(){},_=function(t){return t instanceof _?t:this instanceof _?void(this._wrapped=t):new _(t)};e.nodeType?n._=_:(!t.nodeType&&t.exports&&(e=t.exports=_),e._=_),_.VERSION="1.9.1";var g,m=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,o){return t.call(e,n,i,o)};case 4:return function(n,i,o,r){return t.call(e,n,i,o,r)}}return function(){return t.apply(e,arguments)}},b=function(t,e,n){return _.iteratee!==g?_.iteratee(t,e):null==t?_.identity:_.isFunction(t)?m(t,e,n):_.isObject(t)&&!_.isArray(t)?_.matcher(t):_.property(t)};_.iteratee=g=function(t,e){return b(t,e,1/0)};var v=function(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),i=Array(n),o=0;o<n;o++)i[o]=arguments[o+e];switch(e){case 0:return t.call(this,i);case 1:return t.call(this,arguments[0],i);case 2:return t.call(this,arguments[0],arguments[1],i)}var r=Array(e+1);for(o=0;o<e;o++)r[o]=arguments[o];return r[e]=i,t.apply(this,r)}},y=function(t){if(!_.isObject(t))return{};if(f)return f(t);x.prototype=t;var e=new x;return x.prototype=null,e},k=function(t){return function(e){return null==e?void 0:e[t]}},w=function(t,e){return null!=t&&l.call(t,e)},E=function(t,e){for(var n=e.length,i=0;i<n;i++){if(null==t)return;t=t[e[i]]}return n?t:void 0},C=Math.pow(2,53)-1,P=k("length"),S=function(t){var e=P(t);return"number"==typeof e&&e>=0&&e<=C};_.each=_.forEach=function(t,e,n){var i,o;if(e=m(e,n),S(t))for(i=0,o=t.length;i<o;i++)e(t[i],i,t);else{var r=_.keys(t);for(i=0,o=r.length;i<o;i++)e(t[r[i]],r[i],t)}return t},_.map=_.collect=function(t,e,n){e=b(e,n);for(var i=!S(t)&&_.keys(t),o=(i||t).length,r=Array(o),a=0;a<o;a++){var s=i?i[a]:a;r[a]=e(t[s],s,t)}return r};var T=function(t){return function(e,n,i,o){var r=arguments.length>=3;return function(e,n,i,o){var r=!S(e)&&_.keys(e),a=(r||e).length,s=t>0?0:a-1;for(o||(i=e[r?r[s]:s],s+=t);s>=0&&s<a;s+=t){var p=r?r[s]:s;i=n(i,e[p],p,e)}return i}(e,m(n,o,4),i,r)}};_.reduce=_.foldl=_.inject=T(1),_.reduceRight=_.foldr=T(-1),_.find=_.detect=function(t,e,n){var i=(S(t)?_.findIndex:_.findKey)(t,e,n);if(void 0!==i&&-1!==i)return t[i]},_.filter=_.select=function(t,e,n){var i=[];return e=b(e,n),_.each(t,function(t,n,o){e(t,n,o)&&i.push(t)}),i},_.reject=function(t,e,n){return _.filter(t,_.negate(b(e)),n)},_.every=_.all=function(t,e,n){e=b(e,n);for(var i=!S(t)&&_.keys(t),o=(i||t).length,r=0;r<o;r++){var a=i?i[r]:r;if(!e(t[a],a,t))return!1}return!0},_.some=_.any=function(t,e,n){e=b(e,n);for(var i=!S(t)&&_.keys(t),o=(i||t).length,r=0;r<o;r++){var a=i?i[r]:r;if(e(t[a],a,t))return!0}return!1},_.contains=_.includes=_.include=function(t,e,n,i){return S(t)||(t=_.values(t)),("number"!=typeof n||i)&&(n=0),_.indexOf(t,e,n)>=0},_.invoke=v(function(t,e,n){var i,o;return _.isFunction(e)?o=e:_.isArray(e)&&(i=e.slice(0,-1),e=e[e.length-1]),_.map(t,function(t){var r=o;if(!r){if(i&&i.length&&(t=E(t,i)),null==t)return;r=t[e]}return null==r?r:r.apply(t,n)})}),_.pluck=function(t,e){return _.map(t,_.property(e))},_.where=function(t,e){return _.filter(t,_.matcher(e))},_.findWhere=function(t,e){return _.find(t,_.matcher(e))},_.max=function(t,e,n){var i,o,r=-1/0,a=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var s=0,p=(t=S(t)?t:_.values(t)).length;s<p;s++)null!=(i=t[s])&&i>r&&(r=i);else e=b(e,n),_.each(t,function(t,n,i){((o=e(t,n,i))>a||o===-1/0&&r===-1/0)&&(r=t,a=o)});return r},_.min=function(t,e,n){var i,o,r=1/0,a=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var s=0,p=(t=S(t)?t:_.values(t)).length;s<p;s++)null!=(i=t[s])&&i<r&&(r=i);else e=b(e,n),_.each(t,function(t,n,i){((o=e(t,n,i))<a||o===1/0&&r===1/0)&&(r=t,a=o)});return r},_.shuffle=function(t){return _.sample(t,1/0)},_.sample=function(t,e,n){if(null==e||n)return S(t)||(t=_.values(t)),t[_.random(t.length-1)];var i=S(t)?_.clone(t):_.values(t),o=P(i);e=Math.max(Math.min(e,o),0);for(var r=o-1,a=0;a<e;a++){var s=_.random(a,r),p=i[a];i[a]=i[s],i[s]=p}return i.slice(0,e)},_.sortBy=function(t,e,n){var i=0;return e=b(e,n),_.pluck(_.map(t,function(t,n,o){return{value:t,index:i++,criteria:e(t,n,o)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index}),"value")};var M=function(t,e){return function(n,i,o){var r=e?[[],[]]:{};return i=b(i,o),_.each(n,function(e,o){var a=i(e,o,n);t(r,e,a)}),r}};_.groupBy=M(function(t,e,n){w(t,n)?t[n].push(e):t[n]=[e]}),_.indexBy=M(function(t,e,n){t[n]=e}),_.countBy=M(function(t,e,n){w(t,n)?t[n]++:t[n]=1});var O=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;_.toArray=function(t){return t?_.isArray(t)?p.call(t):_.isString(t)?t.match(O):S(t)?_.map(t,_.identity):_.values(t):[]},_.size=function(t){return null==t?0:S(t)?t.length:_.keys(t).length},_.partition=M(function(t,e,n){t[n?0:1].push(e)},!0),_.first=_.head=_.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:_.initial(t,t.length-e)},_.initial=function(t,e,n){return p.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},_.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:_.rest(t,Math.max(0,t.length-e))},_.rest=_.tail=_.drop=function(t,e,n){return p.call(t,null==e||n?1:e)},_.compact=function(t){return _.filter(t,Boolean)};var N=function(t,e,n,i){for(var o=(i=i||[]).length,r=0,a=P(t);r<a;r++){var s=t[r];if(S(s)&&(_.isArray(s)||_.isArguments(s)))if(e)for(var p=0,c=s.length;p<c;)i[o++]=s[p++];else N(s,e,n,i),o=i.length;else n||(i[o++]=s)}return i};_.flatten=function(t,e){return N(t,e,!1)},_.without=v(function(t,e){return _.difference(t,e)}),_.uniq=_.unique=function(t,e,n,i){_.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=b(n,i));for(var o=[],r=[],a=0,s=P(t);a<s;a++){var p=t[a],c=n?n(p,a,t):p;e&&!n?(a&&r===c||o.push(p),r=c):n?_.contains(r,c)||(r.push(c),o.push(p)):_.contains(o,p)||o.push(p)}return o},_.union=v(function(t){return _.uniq(N(t,!0,!0))}),_.intersection=function(t){for(var e=[],n=arguments.length,i=0,o=P(t);i<o;i++){var r=t[i];if(!_.contains(e,r)){var a;for(a=1;a<n&&_.contains(arguments[a],r);a++);a===n&&e.push(r)}}return e},_.difference=v(function(t,e){return e=N(e,!0,!0),_.filter(t,function(t){return!_.contains(e,t)})}),_.unzip=function(t){for(var e=t&&_.max(t,P).length||0,n=Array(e),i=0;i<e;i++)n[i]=_.pluck(t,i);return n},_.zip=v(_.unzip),_.object=function(t,e){for(var n={},i=0,o=P(t);i<o;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n};var j=function(t){return function(e,n,i){n=b(n,i);for(var o=P(e),r=t>0?0:o-1;r>=0&&r<o;r+=t)if(n(e[r],r,e))return r;return-1}};_.findIndex=j(1),_.findLastIndex=j(-1),_.sortedIndex=function(t,e,n,i){for(var o=(n=b(n,i,1))(e),r=0,a=P(t);r<a;){var s=Math.floor((r+a)/2);n(t[s])<o?r=s+1:a=s}return r};var B=function(t,e,n){return function(i,o,r){var a=0,s=P(i);if("number"==typeof r)t>0?a=r>=0?r:Math.max(r+s,a):s=r>=0?Math.min(r+1,s):r+s+1;else if(n&&r&&s)return i[r=n(i,o)]===o?r:-1;if(o!=o)return(r=e(p.call(i,a,s),_.isNaN))>=0?r+a:-1;for(r=t>0?a:s-1;r>=0&&r<s;r+=t)if(i[r]===o)return r;return-1}};_.indexOf=B(1,_.findIndex,_.sortedIndex),_.lastIndexOf=B(-1,_.findLastIndex),_.range=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var i=Math.max(Math.ceil((e-t)/n),0),o=Array(i),r=0;r<i;r++,t+=n)o[r]=t;return o},_.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],i=0,o=t.length;i<o;)n.push(p.call(t,i,i+=e));return n};var A=function(t,e,n,i,o){if(!(i instanceof e))return t.apply(n,o);var r=y(t.prototype),a=t.apply(r,o);return _.isObject(a)?a:r};_.bind=v(function(t,e,n){if(!_.isFunction(t))throw new TypeError("Bind must be called on a function");var i=v(function(o){return A(t,i,e,this,n.concat(o))});return i}),_.partial=v(function(t,e){var n=_.partial.placeholder,i=function(){for(var o=0,r=e.length,a=Array(r),s=0;s<r;s++)a[s]=e[s]===n?arguments[o++]:e[s];for(;o<arguments.length;)a.push(arguments[o++]);return A(t,i,this,this,a)};return i}),_.partial.placeholder=_,_.bindAll=v(function(t,e){var n=(e=N(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=e[n];t[i]=_.bind(t[i],t)}}),_.memoize=function(t,e){var n=function(i){var o=n.cache,r=""+(e?e.apply(this,arguments):i);return w(o,r)||(o[r]=t.apply(this,arguments)),o[r]};return n.cache={},n},_.delay=v(function(t,e,n){return setTimeout(function(){return t.apply(null,n)},e)}),_.defer=_.partial(_.delay,_,1),_.throttle=function(t,e,n){var i,o,r,a,s=0;n||(n={});var p=function(){s=!1===n.leading?0:_.now(),i=null,a=t.apply(o,r),i||(o=r=null)},c=function(){var c=_.now();s||!1!==n.leading||(s=c);var l=e-(c-s);return o=this,r=arguments,l<=0||l>e?(i&&(clearTimeout(i),i=null),s=c,a=t.apply(o,r),i||(o=r=null)):i||!1===n.trailing||(i=setTimeout(p,l)),a};return c.cancel=function(){clearTimeout(i),s=0,i=o=r=null},c},_.debounce=function(t,e,n){var i,o,r=function(e,n){i=null,n&&(o=t.apply(e,n))},a=v(function(a){if(i&&clearTimeout(i),n){var s=!i;i=setTimeout(r,e),s&&(o=t.apply(this,a))}else i=_.delay(r,e,this,a);return o});return a.cancel=function(){clearTimeout(i),i=null},a},_.wrap=function(t,e){return _.partial(e,t)},_.negate=function(t){return function(){return!t.apply(this,arguments)}},_.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},_.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},_.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},_.once=_.partial(_.before,2),_.restArguments=v;var H=!{toString:null}.propertyIsEnumerable("toString"),L=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],I=function(t,e){var n=L.length,i=t.constructor,o=_.isFunction(i)&&i.prototype||r,a="constructor";for(w(t,a)&&!_.contains(e,a)&&e.push(a);n--;)(a=L[n])in t&&t[a]!==o[a]&&!_.contains(e,a)&&e.push(a)};_.keys=function(t){if(!_.isObject(t))return[];if(h)return h(t);var e=[];for(var n in t)w(t,n)&&e.push(n);return H&&I(t,e),e},_.allKeys=function(t){if(!_.isObject(t))return[];var e=[];for(var n in t)e.push(n);return H&&I(t,e),e},_.values=function(t){for(var e=_.keys(t),n=e.length,i=Array(n),o=0;o<n;o++)i[o]=t[e[o]];return i},_.mapObject=function(t,e,n){e=b(e,n);for(var i=_.keys(t),o=i.length,r={},a=0;a<o;a++){var s=i[a];r[s]=e(t[s],s,t)}return r},_.pairs=function(t){for(var e=_.keys(t),n=e.length,i=Array(n),o=0;o<n;o++)i[o]=[e[o],t[e[o]]];return i},_.invert=function(t){for(var e={},n=_.keys(t),i=0,o=n.length;i<o;i++)e[t[n[i]]]=n[i];return e},_.functions=_.methods=function(t){var e=[];for(var n in t)_.isFunction(t[n])&&e.push(n);return e.sort()};var z=function(t,e){return function(n){var i=arguments.length;if(e&&(n=Object(n)),i<2||null==n)return n;for(var o=1;o<i;o++)for(var r=arguments[o],a=t(r),s=a.length,p=0;p<s;p++){var c=a[p];e&&void 0!==n[c]||(n[c]=r[c])}return n}};_.extend=z(_.allKeys),_.extendOwn=_.assign=z(_.keys),_.findKey=function(t,e,n){e=b(e,n);for(var i,o=_.keys(t),r=0,a=o.length;r<a;r++)if(e(t[i=o[r]],i,t))return i};var F,D,R=function(t,e,n){return e in n};_.pick=v(function(t,e){var n={},i=e[0];if(null==t)return n;_.isFunction(i)?(e.length>1&&(i=m(i,e[1])),e=_.allKeys(t)):(i=R,e=N(e,!1,!1),t=Object(t));for(var o=0,r=e.length;o<r;o++){var a=e[o],s=t[a];i(s,a,t)&&(n[a]=s)}return n}),_.omit=v(function(t,e){var n,i=e[0];return _.isFunction(i)?(i=_.negate(i),e.length>1&&(n=e[1])):(e=_.map(N(e,!1,!1),String),i=function(t,n){return!_.contains(e,n)}),_.pick(t,i,n)}),_.defaults=z(_.allKeys,!0),_.create=function(t,e){var n=y(t);return e&&_.extendOwn(n,e),n},_.clone=function(t){return _.isObject(t)?_.isArray(t)?t.slice():_.extend({},t):t},_.tap=function(t,e){return e(t),t},_.isMatch=function(t,e){var n=_.keys(e),i=n.length;if(null==t)return!i;for(var o=Object(t),r=0;r<i;r++){var a=n[r];if(e[a]!==o[a]||!(a in o))return!1}return!0},F=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var o=typeof t;return("function"===o||"object"===o||"object"==typeof e)&&D(t,e,n,i)},D=function(t,e,n,i){t instanceof _&&(t=t._wrapped),e instanceof _&&(e=e._wrapped);var o=c.call(t);if(o!==c.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return a.valueOf.call(t)===a.valueOf.call(e)}var r="[object Array]"===o;if(!r){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,p=e.constructor;if(s!==p&&!(_.isFunction(s)&&s instanceof s&&_.isFunction(p)&&p instanceof p)&&"constructor"in t&&"constructor"in e)return!1}i=i||[];for(var l=(n=n||[]).length;l--;)if(n[l]===t)return i[l]===e;if(n.push(t),i.push(e),r){if((l=t.length)!==e.length)return!1;for(;l--;)if(!F(t[l],e[l],n,i))return!1}else{var u,h=_.keys(t);if(l=h.length,_.keys(e).length!==l)return!1;for(;l--;)if(u=h[l],!w(e,u)||!F(t[u],e[u],n,i))return!1}return n.pop(),i.pop(),!0},_.isEqual=function(t,e){return F(t,e)},_.isEmpty=function(t){return null==t||(S(t)&&(_.isArray(t)||_.isString(t)||_.isArguments(t))?0===t.length:0===_.keys(t).length)},_.isElement=function(t){return!(!t||1!==t.nodeType)},_.isArray=u||function(t){return"[object Array]"===c.call(t)},_.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},_.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(t){_["is"+t]=function(e){return c.call(e)==="[object "+t+"]"}}),_.isArguments(arguments)||(_.isArguments=function(t){return w(t,"callee")});var W=n.document&&n.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof W&&(_.isFunction=function(t){return"function"==typeof t||!1}),_.isFinite=function(t){return!_.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},_.isNaN=function(t){return _.isNumber(t)&&isNaN(t)},_.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===c.call(t)},_.isNull=function(t){return null===t},_.isUndefined=function(t){return void 0===t},_.has=function(t,e){if(!_.isArray(e))return w(t,e);for(var n=e.length,i=0;i<n;i++){var o=e[i];if(null==t||!l.call(t,o))return!1;t=t[o]}return!!n},_.noConflict=function(){return n._=i,this},_.identity=function(t){return t},_.constant=function(t){return function(){return t}},_.noop=function(){},_.property=function(t){return _.isArray(t)?function(e){return E(e,t)}:k(t)},_.propertyOf=function(t){return null==t?function(){}:function(e){return _.isArray(e)?E(t,e):t[e]}},_.matcher=_.matches=function(t){return t=_.extendOwn({},t),function(e){return _.isMatch(e,t)}},_.times=function(t,e,n){var i=Array(Math.max(0,t));e=m(e,n,1);for(var o=0;o<t;o++)i[o]=e(o);return i},_.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},_.now=Date.now||function(){return(new Date).getTime()};var G={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Y=_.invert(G),$=function(t){var e=function(e){return t[e]},n="(?:"+_.keys(t).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(o,e):t}};_.escape=$(G),_.unescape=$(Y),_.result=function(t,e,n){_.isArray(e)||(e=[e]);var i=e.length;if(!i)return _.isFunction(n)?n.call(t):n;for(var o=0;o<i;o++){var r=null==t?void 0:t[e[o]];void 0===r&&(r=n,o=i),t=_.isFunction(r)?r.call(t):r}return t};var U=0;_.uniqueId=function(t){var e=++U+"";return t?t+e:e},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,V={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\u2028|\u2029/g,Z=function(t){return"\\"+V[t]};_.template=function(t,e,n){!e&&n&&(e=n),e=_.defaults({},e,_.templateSettings);var i,o=RegExp([(e.escape||q).source,(e.interpolate||q).source,(e.evaluate||q).source].join("|")+"|$","g"),r=0,a="__p+='";t.replace(o,function(e,n,i,o,s){return a+=t.slice(r,s).replace(K,Z),r=s+e.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?a+="'+\n((__t=("+i+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),e}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(e.variable||"obj","_",a)}catch(t){throw t.source=a,t}var s=function(t){return i.call(this,t,_)},p=e.variable||"obj";return s.source="function("+p+"){\n"+a+"}",s},_.chain=function(t){var e=_(t);return e._chain=!0,e};var J=function(t,e){return t._chain?_(e).chain():e};_.mixin=function(t){return _.each(_.functions(t),function(e){var n=_[e]=t[e];_.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),J(this,n.apply(_,t))}}),_},_.mixin(_),_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];_.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],J(this,n)}}),_.each(["concat","join","slice"],function(t){var e=o[t];_.prototype[t]=function(){return J(this,e.apply(this._wrapped,arguments))}}),_.prototype.value=function(){return this._wrapped},_.prototype.valueOf=_.prototype.toJSON=_.prototype.value,_.prototype.toString=function(){return String(this._wrapped)}}()});mn._;hn('@media screen and (max-width:768px){.pixnet-happix-pilot__coupon-card__wrapper{width:100%;border-radius:20px;background-color:#f6f6f6;overflow:hidden}.pixnet-happix-pilot__coupon-card__content-container{padding:15px;padding-bottom:0}.pixnet-happix-pilot__coupon-card__cover{width:100%}.pixnet-happix-pilot__coupon-card__tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;height:22px;transform:translateY(-2px);-webkit-transform:translateY(-2px);-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 5px;background-color:#ff7674;border-radius:6px;font-family:PingFang TC;font-size:12px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;vertical-align:middle}.pixnet-happix-pilot__coupon-card__tag:before{display:inline-block;width:18px;height:18px;content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_coupon.svg)}.pixnet-happix-pilot__coupon-card__title{font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:1.71;letter-spacing:1px;text-align:justify;color:#000}.pixnet-happix-pilot__coupon-card__description{margin-top:12px;margin-bottom:15px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:PingFang TC;font-size:13px;font-weight:400;font-style:normal;font-stretch:normal;line-height:1.69;letter-spacing:1px;color:#4a4a4a}.pixnet-happix-pilot__coupon-card__btn-link{height:40px;border-top:1px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__coupon-card__btn-link a{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#4a90e2;text-decoration:none;line-height:40px}.pixnet-happix-pilot__coupon-card__btn-link a:after{display:block;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_arrow_blue.svg);content:"";height:16px;width:16px;margin-left:3px}.pixnet-happix-pilot__coupon-card__runs-out{min-height:40px;border-top:2px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__coupon-card__runs-out a{display:block;padding:10px 0;color:#a8a9b2;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;letter-spacing:1px;text-decoration:none;line-height:1.83;pointer-events:none;cursor:not-allowed}}@media screen and (min-width:769px){.pixnet-happix-pilot__coupon-card__wrapper{width:100%;border-radius:20px;background-color:#f6f6f6;overflow:hidden}.pixnet-happix-pilot__coupon-card__content-container{padding:15px;padding-bottom:0}.pixnet-happix-pilot__coupon-card__cover{width:100%}.pixnet-happix-pilot__coupon-card__tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;height:22px;transform:translateY(-2px);-webkit-transform:translateY(-2px);-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 5px;background-color:#ff7674;border-radius:6px;font-family:PingFang TC;font-size:12px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;vertical-align:middle}.pixnet-happix-pilot__coupon-card__tag:before{display:inline-block;width:18px;height:18px;content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_coupon.svg)}.pixnet-happix-pilot__coupon-card__title{font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:1.71;letter-spacing:1px;text-align:justify;color:#000}.pixnet-happix-pilot__coupon-card__description{margin-top:12px;margin-bottom:15px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:PingFang TC;font-size:13px;font-weight:400;font-style:normal;font-stretch:normal;line-height:1.69;letter-spacing:1px;color:#4a4a4a}.pixnet-happix-pilot__coupon-card__btn-link{height:40px;border-top:1px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__coupon-card__btn-link a{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#4a90e2;text-decoration:none;line-height:40px}.pixnet-happix-pilot__coupon-card__btn-link a:after{display:block;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_arrow_blue.svg);content:"";height:16px;width:16px;margin-left:3px}.pixnet-happix-pilot__coupon-card__runs-out{min-height:40px;border-top:2px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__coupon-card__runs-out a{display:block;padding:10px 0;color:#a8a9b2;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;letter-spacing:1px;text-decoration:none;line-height:1.83;pointer-events:none;cursor:not-allowed}}');var bn=function(t){function e(t,n){return Z(this,e),Ce(this,Oe(e).call(this,t,n))}return Ae(e,qe),tt(e,[{key:"_getImageHtml",value:function(){var t=this.getCssPrefix();return this.props.cover?'<img class="'.concat(t,'__coupon-card__cover" src="').concat(this.props.cover,'">'):""}},{key:"_getLinkText",value:function(){switch(this.props.state){case"ACCEPTED":return"已領取 <div>可到 email 查看優惠</div>";case"PENDING":return"免費領取";case"UNAVAILABLE":return"已領完";default:return""}}},{key:"_getLinkTextStyle",value:function(){var t=this.getCssPrefix(),e=this.props.state;return"".concat(t,"PENDING"===e?"__coupon-card__btn-link":"__coupon-card__runs-out")}},{key:"getTemplate",value:function(){var t=this.getCssPrefix();return'\n            <div class="'.concat(t,"__coupon-card__").concat(this.props.id,'">\n                <div class="').concat(t,'__coupon-card__wrapper">\n                    ').concat(this._getImageHtml(),'\n                    <div class="').concat(t,'__coupon-card__content-container">\n                        <div>\n                            <span class="').concat(t,'__coupon-card__tag">').concat(this.props.tag,'</span>\n                            <span class="').concat(t,'__coupon-card__title">').concat(this.props.title,'</span>\n                        </div>\n                        <div class="').concat(t,'__coupon-card__description">').concat(this.props.description,'</div>\n                        <div class="').concat(this._getLinkTextStyle(),'">\n                            <a  \n                                href="').concat(this.props.link,'" target="_blank">\n                                ').concat(this._getLinkText(),"\n                            </a>    \n                        </div>\n                    </div>\n                </div>\n            </div>\n        ")}},{key:"bindEvents",value:function(){var t=this;this.buttonLink.bindEvent("click",mn.debounce(function(){pn({category:"pilot-happixPopup",action:"positionClick",label:t.props.msg_pos})},100))}},{key:"getElements",value:function(){var t=this.getCssPrefix();this.couponCardElement=Ve.getElementByPostfix("coupon-card__".concat(this.props.id)),this.buttonLink=Ve.wrapper(document.querySelector(".".concat(t,"__coupon-card__btn-link > a")))}},{key:"render",value:function(){return this.containerElement.appendChild(Ve.createElement(this.getTemplate())),this.getElements(),this.bindEvents(),this}}]),e}();hn('.pixnet-happix-pilot__happix-card{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.pixnet-happix-pilot__happix-card__avatar{width:36px}.pixnet-happix-pilot__happix-card__conversation{width:10px}.pixnet-happix-pilot__happix-card__content{-webkit-box-flex:1;-ms-flex:1;flex:1;padding:15px;padding-bottom:0;color:#000;background:#f6f6f6;border-radius:20px;border-top-left-radius:0}.pixnet-happix-pilot__happix-card__content__message{padding-bottom:15px}.pixnet-happix-pilot__happix-card__content__link,.pixnet-happix-pilot__happix-card__content__message{font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px}.pixnet-happix-pilot__happix-card__content__link{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:10px 0;border-top:1px solid #e9e9e9;color:#4a90e2;text-align:center;text-decoration:none;cursor:pointer}.pixnet-happix-pilot__happix-card__content__link:hover{color:#4a90e2}.pixnet-happix-pilot__happix-card__content__link.hidden{display:none}.pixnet-happix-pilot__happix-card__content__link:after{display:block;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_arrow_blue.svg);content:"";height:16px;width:16px;margin-left:3px}');var vn=function(t){function e(t,n){return Z(this,e),Ce(this,Oe(e).call(this,t,n))}return Ae(e,qe),tt(e,[{key:"getTemplate",value:function(){var t=this.getCssPrefix(),e=this.props.name?"".concat(this.props.name,"～我是你的領航員Happix，很高興看到你！"):"我是領航員Happix，很高興看到你！600萬人正在挑戰任務拿好康，快跟上！",n=this.props.name?"hidden":"";return'\n            <div class="'.concat(t,'__happix-card">\n                <img\n                    class="').concat(t,'__happix-card__avatar"\n                    src="').concat(Fe,'/happix_head.svg"\n                />\n                <img\n                    class="').concat(t,'__happix-card__conversation"\n                    src="').concat(Fe,'/conversation_gray.svg"\n                />\n                <div class="').concat(t,'__happix-card__content">\n                    <div class="').concat(t,'__happix-card__content__message">').concat(e,'</div>\n                    <a\n                        class="').concat(t,"__happix-card__content__link ").concat(n,'"\n                        href="').concat(en.getOptions().getLoginURL(),'"\n                    >\n                        立即登入\n                    </a>\n                </div>\n            </img>\n        ')}},{key:"getElements",value:function(){this.happixCardElement=Ve.getElementByPostfix("happix-card"),this.contentLinkElement=this.happixCardElement.getElementByPostfix("happix-card__content__link")}},{key:"bindEvents",value:function(){var t=this;this.contentLinkElement.bindEvent("click",function(){pn({category:"pilot-happixPopup",action:"login"}),pn({category:"pilot-happixPopup",action:"positionClick",label:t.props.msg_pos})})}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplate()),this.getElements(),this.bindEvents(),this}}]),e}();hn(".pixnet-happix-pilot__message-card{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.pixnet-happix-pilot__message-card__avatar{width:36px}.pixnet-happix-pilot__message-card__conversation{width:10px}.pixnet-happix-pilot__message-card__content{-webkit-box-flex:1;-ms-flex:1;flex:1;padding:15px;background:#f6f6f6;border-radius:20px;border-top-left-radius:0;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px}");var yn=function(t){function e(t,n){return Z(this,e),Ce(this,Oe(e).call(this,t,n))}return Ae(e,qe),tt(e,[{key:"getTemplate",value:function(){var t=this.getCssPrefix();return'\n            <div class="'.concat(t,'__message-card">\n                <img\n                    class="').concat(t,'__message-card__avatar"\n                    src="').concat(Fe,'/happix_head.svg"\n                />\n                <img\n                    class="').concat(t,'__message-card__conversation"\n                    src="').concat(Fe,'/conversation_gray.svg"\n                />\n                <div class="').concat(t,'__message-card__content">').concat(this.props.message,"</div>\n            </img>\n        ")}},{key:"getElements",value:function(){this.messageCardElement=Ve.getElementByPostfix("message-card")}},{key:"render",value:function(){return this.containerElement.appendChild(Ve.createElement(this.getTemplate())),this.getElements(),this}}]),e}(),kn={now:function(){return Date.now()},withinSpecificHours:function(t,e,n){return!(!t||!e)&&Math.ceil(Math.abs(t-e))<36e5*n},toCountDownTime:function(t){var e=Number(t)-this.now()/1e3,n=e>0?"剩下":"過期",i=Math.floor(e/60),o=Math.floor(i/1440),r=Math.floor((i-1440*o)/60);return n+o+"日"+r+"小時"+(i-1440*o-60*r)+"分"}},wn=function(){var t=Number(Ue.$mobile_screen_max_width.replace("px",""));return window.innerWidth<=t};hn('@media screen and (max-width:768px){.pixnet-happix-pilot__task-card__wrapper{display:block;overflow:hidden;text-decoration:none;background-color:#f6f6f6;border-radius:20px}.pixnet-happix-pilot__task-card__content-container{padding:15px;padding-bottom:0}.pixnet-happix-pilot__task-card__cover{display:block;width:100%}.pixnet-happix-pilot__task-card__cover-container{position:relative}.pixnet-happix-pilot__task-card__countdown{position:absolute;bottom:0;width:100%;padding:2px 15px;font-size:11px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;background-color:rgba(0,0,0,.5)}.pixnet-happix-pilot__task-card__countdown:before{content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_time.svg);display:inline-block;width:14px;height:14px;margin-right:5px;vertical-align:middle;-o-object-fit:contain;object-fit:contain;-webkit-transform:translateY(-10%);transform:translateY(-10%)}.pixnet-happix-pilot__task-card__tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:22px;padding:0 5px;vertical-align:middle;font-family:PingFang TC;font-size:12px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;-webkit-transform:translateY(-2px);transform:translateY(-2px);background-color:#66b3d9;border-radius:6px}.pixnet-happix-pilot__task-card__tag:before{content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_task.svg);display:inline-block;width:18px;height:18px}.pixnet-happix-pilot__task-card__title{font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:1.71;letter-spacing:1px;text-align:justify;color:#000}.pixnet-happix-pilot__task-card__description{overflow:hidden;max-height:61px;height:auto;margin-top:12px;margin-bottom:15px;font-family:PingFang TC;font-size:13px;font-weight:400;font-style:normal;font-stretch:normal;line-height:1.69;letter-spacing:1px;color:#4a4a4a;text-overflow:ellipsis;-o-text-overflow:ellipsis;-ms-text-overflow:ellipsis;-moz-text-overflow:ellipsis;word-wrap:break-word}.pixnet-happix-pilot__task-card__btn-link{height:40px;border-top:1px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__task-card__btn-link span{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#4a90e2;line-height:40px}.pixnet-happix-pilot__task-card__btn-link span:after{content:"";display:block;height:16px;width:16px;margin-left:3px;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_arrow_blue.svg)}}@media screen and (min-width:769px){.pixnet-happix-pilot__task-card__wrapper{display:block;overflow:hidden;text-decoration:none;background-color:#f6f6f6;border-radius:20px}.pixnet-happix-pilot__task-card__content-container{padding:15px;padding-bottom:0}.pixnet-happix-pilot__task-card__cover{display:block;width:100%}.pixnet-happix-pilot__task-card__tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:22px;padding:0 5px;vertical-align:middle;font-family:PingFang TC;font-size:12px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;background-color:#66b3d9;border-radius:6px;-webkit-transform:translateY(-2px);transform:translateY(-2px)}.pixnet-happix-pilot__task-card__tag:before{content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_task.svg);display:inline-block;width:18px;height:18px}.pixnet-happix-pilot__task-card__cover-container{position:relative}.pixnet-happix-pilot__task-card__countdown{position:absolute;width:100%;padding:2px 15px;bottom:0;font-size:11px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;background-color:rgba(0,0,0,.5)}.pixnet-happix-pilot__task-card__countdown:before{content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_time.svg);display:inline-block;width:14px;height:14px;margin-right:5px;vertical-align:middle;-o-object-fit:contain;object-fit:contain;-webkit-transform:translateY(-10%);transform:translateY(-10%)}.pixnet-happix-pilot__task-card__title{font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:1.71;letter-spacing:1px;color:#000;text-align:justify}.pixnet-happix-pilot__task-card__description{overflow:hidden;height:auto;max-height:61px;margin-top:12px;margin-bottom:15px;font-family:PingFang TC;font-size:13px;font-weight:400;font-style:normal;font-stretch:normal;line-height:1.69;letter-spacing:1px;color:#4a4a4a;text-overflow:ellipsis;-o-text-overflow:ellipsis;-ms-text-overflow:ellipsis;-moz-text-overflow:ellipsis;word-wrap:break-word}.pixnet-happix-pilot__task-card__btn-link{height:40px;border-top:1px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__task-card__btn-link span{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#4a90e2;line-height:40px}.pixnet-happix-pilot__task-card__btn-link span:after{content:"";display:block;height:16px;width:16px;margin-left:3px;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_arrow_blue.svg)}}');var En=function(t){function e(t,n){return Z(this,e),Ce(this,Oe(e).call(this,t,n))}return Ae(e,qe),tt(e,[{key:"_getImageHtml",value:function(){var t=this.getCssPrefix(),e=wn();return this.props.cover?'\n            <img class="'.concat(t,'__task-card__cover"\n                src="').concat(e?this.props.cover:un(this.props.cover,254,127),'"\n            >\n        '):""}},{key:"_getCountDownHtml",value:function(){if(!this.props.cover)return"";var t=this.getCssPrefix();return'<div class="'.concat(t,'__task-card__countdown">\n                    ').concat(kn.toCountDownTime(this.props.end_time),"\n                </div>")}},{key:"getTemplate",value:function(){var t=this.getCssPrefix();return'\n            <a class="'.concat(t,"__task-card__wrapper ").concat(t,"__task-card__").concat(this.props.id,'"\n                href="').concat(this.props.link,'" target="_blank">\n                <div class="').concat(t,'__task-card__cover-container">\n                    ').concat(this._getImageHtml(),"\n                    ").concat(this._getCountDownHtml(),'\n                </div>\n                <div class="').concat(t,'__task-card__content-container">\n                    <div>\n                        <span class="').concat(t,'__task-card__tag">').concat(this.props.tag,'</span>\n                        <span class="').concat(t,'__task-card__title">').concat(this.props.title,'</span>\n                    </div>\n                    <div class="').concat(t,'__task-card__description">').concat(this.props.description,'</div>\n                    <div class="').concat(t,'__task-card__btn-link">\n                        <span>參加任務</span>\n                    </div>\n                </div>\n            </a>\n        ')}},{key:"bindEvents",value:function(){var t=this;this.taskCardElement.bindEvent("click",mn.debounce(function(){pn({category:"pilot-happixPopup",action:"positionClick",label:String(t.props.msg_pos),id:t.props.id})},100))}},{key:"getElements",value:function(){this.taskCardElement=Ve.getElementByPostfix("task-card__".concat(this.props.id))}},{key:"render",value:function(){return this.containerElement.appendChild(Ve.createElement(this.getTemplate())),this.getElements(),this.bindEvents(),this}}]),e}();hn(".pixnet-happix-pilot__weather-card{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;color:#000}.pixnet-happix-pilot__weather-card>:not(:first-child){margin-left:8px}.pixnet-happix-pilot__weather-card img{width:40px}.pixnet-happix-pilot__weather-card span{font-family:PingFang TC;font-size:16px;font-weight:400;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1.2px;text-overflow:ellipsis}");var Cn=function(t){function e(t,n){return Z(this,e),Ce(this,Oe(e).call(this,t,n))}return Ae(e,qe),tt(e,[{key:"getTemplate",value:function(){var t=this.getCssPrefix();return'\n            <div class="'.concat(t,'__weather-card">\n                <img src="').concat(Ye[this.props.type],'" />\n                <span>').concat(this.getTimeGreeting(),"，").concat($e[this.props.type],"</span>\n            </div>\n        ")}},{key:"getTimeGreeting",value:function(){var t=(new Date).getHours();return t>4&&t<11?"早安":t>10&&t<17?"午安":"晚安"}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplate()),this}}]),e}();hn('@media screen and (max-width:768px){.pixnet-happix-pilot__happix-messenger{position:fixed;top:0;right:0;bottom:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);z-index:2;will-change:opacity}.pixnet-happix-pilot__happix-messenger.hidden{opacity:0;pointer-events:none}.pixnet-happix-pilot__happix-messenger__wrapper{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;-webkit-transition:-webkit-transform .4s;transition:-webkit-transform .4s;transition:transform .4s;transition:transform .4s,-webkit-transform .4s;will-change:transform}.pixnet-happix-pilot__happix-messenger__wrapper.hidden{-webkit-transform:translateY(100%);transform:translateY(100%)}.pixnet-happix-pilot__happix-messenger__avatar{position:absolute;top:47px;right:15px;z-index:2;cursor:pointer}.pixnet-happix-pilot__happix-messenger__content{position:absolute;top:110px;right:0;bottom:0;left:0;width:100%;height:calc(100% - 110px);padding:15px 0;background:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;overflow-y:auto;-webkit-overflow-scrolling:touch;z-index:1}.pixnet-happix-pilot__happix-messenger__content>*{margin-right:20px;margin-left:15px}.pixnet-happix-pilot__happix-messenger__content__date-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;margin-right:0;margin-left:0;color:#81828e;font-family:PingFang TC;font-size:11px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.8px}.pixnet-happix-pilot__happix-messenger__content__date-container:before{content:"";-webkit-box-flex:1;-ms-flex:1;flex:1;margin-right:12px;border-top:1px solid #f2f2f2}.pixnet-happix-pilot__happix-messenger__content__date-container:after{content:"";-webkit-box-flex:1;-ms-flex:1;flex:1;margin-left:12px;border-top:1px solid #f2f2f2}.pixnet-happix-pilot__happix-messenger__content__happix-container{margin-top:20px}.pixnet-happix-pilot__happix-messenger__content__card-container>*,.pixnet-happix-pilot__happix-messenger__content__coupon-container>*,.pixnet-happix-pilot__happix-messenger__content__task-container>*{margin-top:15px;margin-left:46px}.pixnet-happix-pilot__happix-messenger__content__card-container>:first-child,.pixnet-happix-pilot__happix-messenger__content__coupon-container>:first-child,.pixnet-happix-pilot__happix-messenger__content__task-container>:first-child{margin-top:35px;margin-left:0}.pixnet-happix-pilot__happix-messenger__fixed{position:fixed}.pixnet-happix-pilot__happix-messenger__close_button{position:absolute;top:0;left:0;display:inline-block;width:24px;height:24px;margin:0;padding:10px;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_close.svg) 50% no-repeat;cursor:pointer}}@media screen and (min-width:769px){.pixnet-happix-pilot__happix-messenger{position:fixed;top:180px;right:0;bottom:0;left:0;width:100%;height:calc(100% - 180px);margin:auto;-webkit-transition:all .4s;transition:all .4s}.pixnet-happix-pilot__happix-messenger:focus{outline:none}.pixnet-happix-pilot__happix-messenger.hidden{opacity:0;-webkit-transform:translateY(100%);transform:translateY(100%);pointer-events:none}.pixnet-happix-pilot__happix-messenger.dangling{bottom:46px;height:calc(100% - 226px)}.pixnet-happix-pilot__happix-messenger__wrapper{position:absolute;top:0;right:0;bottom:0;width:335px;height:100%}.pixnet-happix-pilot__happix-messenger__avatar{position:absolute;top:0;right:0;z-index:2;cursor:pointer;pointer-events:auto}.pixnet-happix-pilot__happix-messenger__content{position:absolute;top:74px;right:0;bottom:0;left:0;width:100%;padding:15px 0;background:#fff;border-top-right-radius:6px;border-top-left-radius:6px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 4px 0 rgba(0,0,0,.4);box-shadow:0 0 4px 0 rgba(0,0,0,.4);overflow-y:auto;-webkit-overflow-scrolling:touch;z-index:1;pointer-events:auto}.pixnet-happix-pilot__happix-messenger__content>*{margin-right:20px;margin-left:15px}.pixnet-happix-pilot__happix-messenger__content__date-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;margin-right:0;margin-left:0;color:#81828e;font-family:PingFang TC;font-size:11px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.8px}.pixnet-happix-pilot__happix-messenger__content__date-container:before{content:"";-webkit-box-flex:1;-ms-flex:1;flex:1;margin-right:12px;border-top:1px solid #f2f2f2}.pixnet-happix-pilot__happix-messenger__content__date-container:after{content:"";-webkit-box-flex:1;-ms-flex:1;flex:1;margin-left:12px;border-top:1px solid #f2f2f2}.pixnet-happix-pilot__happix-messenger__content__happix-container{margin-top:20px}.pixnet-happix-pilot__happix-messenger__content__card-container>*,.pixnet-happix-pilot__happix-messenger__content__coupon-container>*,.pixnet-happix-pilot__happix-messenger__content__task-container>*{margin-top:15px;margin-left:46px}.pixnet-happix-pilot__happix-messenger__content__card-container>:first-child,.pixnet-happix-pilot__happix-messenger__content__coupon-container>:first-child,.pixnet-happix-pilot__happix-messenger__content__task-container>:first-child{margin-top:35px;margin-left:0}.pixnet-happix-pilot__happix-messenger-mask{opacity:0;will-change:opacity}.pixnet-happix-pilot__happix-messenger-mask.show{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.6);opacity:1}}');var Pn,Sn,Tn,Mn=function(){return{scrollDepth:{s25:!1,s50:!1,s75:!1,s100:!1},cardTotal:0,positionMax:0}},On=function(t){function e(t,n){var i;return Z(this,e),(i=Ce(this,Oe(e).call(this,t,n))).saveWindowScroll(),i.track=Mn(),i.closeHappixMessager=i.closeHappixMessager.bind(Ee(Ee(i))),i}return Ae(e,qe),tt(e,[{key:"getTemplate",value:function(){var t=this.getCssPrefix(),e=this.props&&this.props.dangling,n=(new Date).toLocaleDateString("zh-TW",{month:"long",day:"numeric",weekday:"short"});return'\n            <div class="'.concat(t,'__happix-messenger-mask"></div>\n            <div\n                class="').concat(t,"__happix-messenger hidden ").concat(e?"dangling":"",'"\n                style="max-width: ').concat(en.getOptions().getPilotWidth(),'px;"\n            >\n                <div class="').concat(t,'__happix-messenger__wrapper hidden">\n                  <img\n                      class="').concat(t,'__happix-messenger__avatar"\n                      src="').concat(Fe,'/btn_happix_ufo_open.png"\n                      srcset="').concat(Fe,"/btn_happix_ufo_open@2x.png 2x,\n                                ").concat(Fe,'/btn_happix_ufo_open@3x.png 3x"\n                  />\n                  <div class="').concat(t,'__happix-messenger__content">\n                      ').concat(wn()?'<span class="'.concat(t,'__happix-messenger__close_button"></span>'):"",'\n                      <div class="').concat(t,'__happix-messenger__content__weather-container"></div>\n                      <div class="').concat(t,'__happix-messenger__content__date-container">\n                          ').concat(n,'\n                      </div>\n                      <div class="').concat(t,'__happix-messenger__content__happix-container"></div>\n                      <div class="').concat(t,'__happix-messenger__content__coupon-container"></div>\n                      <div class="').concat(t,'__happix-messenger__content__task-container"></div>\n                  </div>\n                </div>\n            </div>\n        ')}},{key:"getElements",value:function(){this.bodyElement=Ve.getElementBySelector("body"),this.happixMaskElement=Ve.getElementByPostfix("happix-messenger-mask"),this.happixMessengerElement=Ve.getElementByPostfix("happix-messenger"),this.happixWrapperElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__wrapper"),this.happixAvatarElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__avatar"),this.happixContentElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__content"),this.weatherContainerElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__content__weather-container"),this.happixContainerElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__content__happix-container"),this.couponContainerElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__content__coupon-container"),this.taskContainerElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__content__task-container"),this.happixCloseButtonElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__close_button")}},{key:"markS25",value:function(){this.track.scrollDepth.s25=!0}},{key:"markS50",value:function(){this.track.scrollDepth.s50=!0}},{key:"markS75",value:function(){this.track.scrollDepth.s75=!0}},{key:"markS100",value:function(){this.track.scrollDepth.s100=!0}},{key:"bindEvents",value:function(){var t=this;this.happixMaskElement.bindEvent("click",this.closeHappixMessager),this.happixMessengerElement.bindEvent("click",this.closeHappixMessager),this.happixAvatarElement.bindEvent("click",this.closeHappixMessager),wn()&&this.happixCloseButtonElement.bindEvent("click",this.closeHappixMessager),this.happixContentElement.bindEvent("click",function(t){t.stopPropagation()}),this.happixContentElement.bindEvent("scroll",mn.debounce(function(e){t.isMessengerVisible()&&(t.trackScrollDepth(e.target),t.trackPositionExposure())},200));var e=this.happixContentElement.getElement();this.happixContentElement.bindEvent("touchmove",mn.debounce(function(t){var n=e.scrollTop,i=e.scrollHeight,o=n+e.offsetHeight;n<=0&&o>=i?t.preventDefault():n<=0?e.scrollTop=1:o===i&&(e.scrollTop=n-1)},100,!0))}},{key:"closeHappixMessager",value:function(t){t.stopPropagation(),this.containerElement.fireEvent("close"),pn({category:"pilot-happixPopup",action:"closePopup"})}},{key:"trackScrollDepth",value:function(t){var e=t.scrollTopMax,n=t.scrollTop,i=this.track.scrollDepth,o=i.s25,r=i.s50,a=i.s75,s=i.s100;!o&&n>.25*e&&(pn({category:"pilot-happixPopup",action:"scrollDepth",label:"scroll-25"}),this.markS25()),!r&&n>.5*e&&(pn({category:"pilot-happixPopup",action:"scrollDepth",label:"scroll-50"}),this.markS50()),!a&&n>.75*e&&(pn({category:"pilot-happixPopup",action:"scrollDepth",label:"scroll-75"}),this.markS75()),s||n!==e||(pn({category:"pilot-happixPopup",action:"scrollDepth",label:"scroll-100"}),this.markS100())}},{key:"trackPositionExposure",value:function(){var t=this,e=this.happixCard,n=this.couponCards,i=this.taskCards,o=[];if(e){if(o.push({element:e.happixCardElement.getElement(),pos:e.msg_pos}),n){var r=n.map(function(t){return{element:t.couponCardElement.getElement(),pos:t.props.msg_pos}});o=o.concat(r)}if(i){var a=i.map(function(t){var e=t.taskCardElement.getElement(),n=t.props;return{element:e,pos:n.msg_pos,id:n.id}});o=o.concat(a)}var s=o.filter(this.isTopLessThanWindowBottom);s.length>this.track.positionMax&&s.forEach(function(e){e.pos>t.track.positionMax&&(pn({category:"pilot-happixPopup",action:"positionImpression",label:e.pos,id:e.id}),t.track.positionMax=e.pos)})}}},{key:"isTopLessThanWindowBottom",value:function(t){return t.element.getBoundingClientRect().top<window.innerHeight}},{key:"resetTrackRecord",value:function(){this.track=Mn()}},{key:"setData",value:function(t){var e=this,n=t.weather,i=t.memberInfo,o=t.coupon,r=t.task,a=0;this.weatherCard=this.createWeatherCard({type:n}),this.happixCard=this.createHappixCard({name:i.display_name,msg_pos:1}),a++,o&&(this.couponMessageCard=this.createCouponMessageCard({message:o.intro}),this.couponCards=o.items.map(function(t){return e.createCouponCard(gn({},t,{msg_pos:++a}))})),r&&(this.taskMessageCard=this.createTaskMessageCard({message:r.intro}),this.taskCards=r.items.map(function(t){return e.createTaskCard(gn({},t,{msg_pos:++a}))})),this.track.cardTotal=a}},{key:"createWeatherCard",value:function(t){return new Cn(this.weatherContainerElement,t).render()}},{key:"createHappixCard",value:function(t){return new vn(this.happixContainerElement,t).render()}},{key:"createCouponMessageCard",value:function(t){return new yn(this.couponContainerElement,t).render()}},{key:"createCouponCard",value:function(t){return new bn(this.couponContainerElement,t).render()}},{key:"createTaskMessageCard",value:function(t){return new yn(this.taskContainerElement,t).render()}},{key:"createTaskCard",value:function(t){return new En(this.taskContainerElement,t).render()}},{key:"saveWindowScroll",value:function(){this.scroll={x:window.scrollX,y:window.scrollY}}},{key:"isMessengerVisible",value:function(){return!this.happixMessengerElement.hasClass("hidden")}},{key:"hide",value:function(){if(this.isMessengerVisible()){this.trackPositionExposure(),this.resetTrackRecord();var t=this.getCssPrefix();this.happixMessengerElement.addClass("hidden"),this.happixWrapperElement.addClass("hidden"),this.happixMaskElement.removeClass("show"),wn()&&(this.bodyElement.removeClass("".concat(t,"__happix-messenger__fixed")).setStyle("overflow",null),window.scroll(this.scroll.x,this.scroll.y))}return this}},{key:"show",value:function(){if(!this.isMessengerVisible()){var t=this.getCssPrefix();this.happixMessengerElement.setStyle("transition","opacity .4s").removeClass("hidden"),this.happixWrapperElement.removeClass("hidden"),this.happixMaskElement.setStyle("transition","opacity .4s").addClass("show"),this.happixContentElement.scrollToTop(),wn()&&(this.saveWindowScroll(),this.bodyElement.addClass("".concat(t,"__happix-messenger__fixed")).setStyle("overflow","hidden")),this.happixMessengerElement.getElement().focus()}return this}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplate()),this.getElements(),this.bindEvents(),this}}]),e}(),Nn=lt("toStringTag"),jn="Arguments"==r(function(){return arguments}()),Bn=function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Nn))?n:jn?r(e):"Object"==(i=r(e))&&"function"==typeof e.callee?"Arguments":i},An=function(t,e,n,i){try{return i?e(A(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&A(o.call(t)),e}},Hn=lt("iterator"),Ln=Array.prototype,In=lt("iterator"),zn=m.getIteratorMethod=function(t){if(null!=t)return t[In]||t["@@iterator"]||nt[Bn(t)]},Fn=_(function(t){var e={},n={},i=t.exports=function(t,i,o,r,a){var s,p,c,l,u=a?function(){return t}:zn(t),f=j(o,r,i?2:1),x=0;if("function"!=typeof u)throw TypeError(t+" is not iterable!");if(function(t){return void 0!==t&&(nt.Array===t||Ln[Hn]===t)}(u)){for(s=h(t.length);s>x;x++)if((l=i?f(A(p=t[x])[0],p[1]):f(t[x]))===e||l===n)return l}else for(c=u.call(t);!(p=c.next()).done;)if((l=An(c,f,p.value,i))===e||l===n)return l};i.BREAK=e,i.RETURN=n}),Dn=lt("species"),Rn=function(t,e){var n,i=A(t).constructor;return void 0===i||null==(n=A(i)[Dn])?e:N(n)},Wn=b.process,Gn=b.setImmediate,Yn=b.clearImmediate,$n=b.MessageChannel,Un=b.Dispatch,qn=0,Vn={},Kn=function(){var t=+this;if(Vn.hasOwnProperty(t)){var e=Vn[t];delete Vn[t],e()}},Zn=function(t){Kn.call(t.data)};Gn&&Yn||(Gn=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return Vn[++qn]=function(){!function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}t.apply(n,e)}("function"==typeof t?t:Function(t),e)},Pn(qn),qn},Yn=function(t){delete Vn[t]},"process"==r(Wn)?Pn=function(t){Wn.nextTick(j(Kn,t,1))}:Un&&Un.now?Pn=function(t){Un.now(j(Kn,t,1))}:$n?(Tn=(Sn=new $n).port2,Sn.port1.onmessage=Zn,Pn=j(Tn.postMessage,Tn,1)):b.addEventListener&&"function"==typeof postMessage&&!b.importScripts?(Pn=function(t){b.postMessage(t+"","*")},b.addEventListener("message",Zn,!1)):Pn="onreadystatechange"in F("script")?function(t){rt.appendChild(F("script")).onreadystatechange=function(){rt.removeChild(this),Kn.call(t)}}:function(t){setTimeout(j(Kn,t,1),0)});var Jn={set:Gn,clear:Yn},Xn=Jn.set,Qn=b.MutationObserver||b.WebKitMutationObserver,ti=b.process,ei=b.Promise,ni="process"==r(ti);var ii={f:function(t){return new function(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=N(e),this.reject=N(n)}(t)}},oi=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},ri=b.navigator,ai=ri&&ri.userAgent||"",si=function(t,e){if(A(t),B(e)&&e.constructor===t)return e;var n=ii.f(t);return(0,n.resolve)(e),n.promise},pi=lt("species"),ci=lt("iterator"),li=!1;try{[7][ci]().return=function(){li=!0}}catch(g){}var ui,hi,fi,xi,di=Jn.set,_i=function(){var t,e,n,i=function(){var i,o;for(ni&&(i=ti.domain)&&i.exit();t;){o=t.fn,t=t.next;try{o()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(ni)n=function(){ti.nextTick(i)};else if(!Qn||b.navigator&&b.navigator.standalone)if(ei&&ei.resolve){var o=ei.resolve(void 0);n=function(){o.then(i)}}else n=function(){Xn.call(b,i)};else{var r=!0,a=document.createTextNode("");new Qn(i).observe(a,{characterData:!0}),n=function(){a.data=r=!r}}return function(i){var o={fn:i,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}(),gi=b.TypeError,mi=b.process,bi=mi&&mi.versions,vi=bi&&bi.v8||"",yi=b.Promise,ki="process"==Bn(mi),wi=function(){},Ei=hi=ii.f,Ci=!!function(){try{var t=yi.resolve(1),e=(t.constructor={})[lt("species")]=function(t){t(wi,wi)};return(ki||"function"==typeof PromiseRejectionEvent)&&t.then(wi)instanceof e&&0!==vi.indexOf("6.6")&&-1===ai.indexOf("Chrome/66")}catch(t){}}(),Pi=function(t){var e;return!(!B(t)||"function"!=typeof(e=t.then))&&e},Si=function(t,e){if(!t._n){t._n=!0;var n=t._c;_i(function(){for(var i=t._v,o=1==t._s,r=0,a=function(e){var n,r,a,s=o?e.ok:e.fail,p=e.resolve,c=e.reject,l=e.domain;try{s?(o||(2==t._h&&Oi(t),t._h=1),!0===s?n=i:(l&&l.enter(),n=s(i),l&&(l.exit(),a=!0)),n===e.promise?c(gi("Promise-chain cycle")):(r=Pi(n))?r.call(n,p,c):p(n)):c(i)}catch(t){l&&!a&&l.exit(),c(t)}};n.length>r;)a(n[r++]);t._c=[],t._n=!1,e&&!t._h&&Ti(t)})}},Ti=function(t){di.call(b,function(){var e,n,i,o=t._v,r=Mi(t);if(r&&(e=oi(function(){ki?mi.emit("unhandledRejection",o,t):(n=b.onunhandledrejection)?n({promise:t,reason:o}):(i=b.console)&&i.error&&i.error("Unhandled promise rejection",o)}),t._h=ki||Mi(t)?2:1),t._a=void 0,r&&e.e)throw e.v})},Mi=function(t){return 1!==t._h&&0===(t._a||t._c).length},Oi=function(t){di.call(b,function(){var e;ki?mi.emit("rejectionHandled",t):(e=b.onrejectionhandled)&&e({promise:t,reason:t._v})})},Ni=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Si(e,!0))},ji=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw gi("Promise can't be resolved itself");(e=Pi(t))?_i(function(){var i={_w:n,_d:!1};try{e.call(t,j(ji,i,1),j(Ni,i,1))}catch(t){Ni.call(i,t)}}):(n._v=t,n._s=1,Si(n,!1))}catch(t){Ni.call({_w:n,_d:!1},t)}}};Ci||(yi=function(t){(function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!")})(this,yi,"Promise","_h"),N(t),ui.call(this);try{t(j(ji,this,1),j(Ni,this,1))}catch(t){Ni.call(this,t)}},(ui=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:$(t,i,e[i]);return t}(yi.prototype,{then:function(t,e){var n=Ei(Rn(this,yi));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=ki?mi.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Si(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),fi=function(){var t=new ui;this.promise=t,this.resolve=j(ji,t,1),this.reject=j(Ni,t,1)},ii.f=Ei=function(t){return t===yi||t===xi?new fi(t):hi(t)}),q(q.G+q.W+q.F*!Ci,{Promise:yi}),ft(yi,"Promise"),function(t){var e="function"==typeof m[t]?m[t]:b[t];L&&e&&!e[pi]&&G.f(e,pi,{configurable:!0,get:function(){return this}})}("Promise"),xi=m.Promise,q(q.S+q.F*!Ci,"Promise",{reject:function(t){var e=Ei(this);return(0,e.reject)(t),e.promise}}),q(q.S+!0*q.F,"Promise",{resolve:function(t){return si(this===xi?yi:this,t)}}),q(q.S+q.F*!(Ci&&function(t,e){if(!e&&!li)return!1;var n=!1;try{var i=[7],o=i[ci]();o.next=function(){return{done:n=!0}},i[ci]=function(){return o},t(i)}catch(t){}return n}(function(t){yi.all(t).catch(wi)})),"Promise",{all:function(t){var e=this,n=Ei(e),i=n.resolve,o=n.reject,r=oi(function(){var n=[],r=0,a=1;Fn(t,!1,function(t){var s=r++,p=!1;n.push(void 0),a++,e.resolve(t).then(function(t){p||(p=!0,n[s]=t,--a||i(n))},o)}),--a||i(n)});return r.e&&o(r.v),n.promise},race:function(t){var e=this,n=Ei(e),i=n.reject,o=oi(function(){Fn(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return o.e&&i(o.v),n.promise}}),q(q.P+q.R,"Promise",{finally:function(t){var e=Rn(this,m.Promise||b.Promise),n="function"==typeof t;return this.then(n?function(n){return si(e,t()).then(function(){return n})}:t,n?function(n){return si(e,t()).then(function(){throw n})}:t)}}),q(q.S,"Promise",{try:function(t){var e=ii.f(this),n=oi(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}});var Bi=m.Promise,Ai={sendHappixAPI:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=en.getOptions().getDomainAppend();if(window.pix&&window.pix.member_token){var o={headers:{Authorization:window.pix.member_token}};n=Qe({},n,o)}return this[t]("".concat("https://happix-pilot-api.pixnet.cc").concat(i).concat(e),n)},get:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.ajax("GET",t,e)},post:function(t,e){return this.ajax("POST",t,e)},ajax:function(t,e,n){return new Bi(function(i,o){var r=new XMLHttpRequest;r.open(t,e,!0),r.onload=function(){4===r.readyState&&200===r.status&&""!==r.response?i(JSON.parse(r.response)):o(r)},r.onerror=function(){o(r)},n&&n.headers&&K(n.headers).forEach(function(t){r.setRequestHeader(t,n.headers[t])}),r.send(n)})}};hn("@media screen and (max-width:768px){.pixnet-happix-pilot__comment-amount{font-size:12px;color:#81828e}}@media screen and (min-width:769px){.pixnet-happix-pilot__comment-amount{font-size:12px;color:#81828e}}");var Hi=function(t){function e(t){var n;return Z(this,e),(n=Ce(this,Oe(e).call(this,t))).cssPrefix=n.getCssPrefix(),n}return Ae(e,qe),tt(e,[{key:"getTemplates",value:function(){return'\n            <img src="'.concat("https://s.pixfs.net/common",'/icons/btn_comment.svg">\n            <span class="').concat(this.cssPrefix,'__comment-amount"></span>\n        ')}},{key:"getCommentAmount",value:function(){var t=document.querySelector(".".concat(this.cssPrefix,"__comment-amount"))||{},e=document.getElementsByTagName("body")[0].dataset.commentsCount||"";t.innerText=e}},{key:"render",value:function(){this.containerElement.setHTML(this.getTemplates()),this.getCommentAmount()}}]),e}();function Li(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";!pix.member_token&&window.pixgame&&!window.pixgame.getState("sharedTopic")&&(window.pixgame.showPromptLoginPopup(t),window.pixgame.setState("sharedTopic",!0),window.pixgame.setStorge("pixSharedPost",1),t)||t&&(t.indexOf("facebook")>-1?window.open(t,"Facebook","height=550,width=550,resizable=1"):location.href=t)}hn("@media screen and (max-width:768px){.pixnet-happix-pilot__share-list__share-line{display:inline-block;width:32px;height:32px;background:url(https://streamtopic.pixnet.net/asset/images/icons/btn_line.svg) 0 no-repeat;cursor:pointer}}.pixnet-happix-pilot__share-list{position:absolute;bottom:45px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around;max-height:0;width:127px;height:42px;margin-top:4px;background-color:#fff;border-radius:30px;-webkit-box-shadow:0 0 15px 0 rgba(0,0,0,.1);box-shadow:0 0 15px 0 rgba(0,0,0,.1);-webkit-transition:max-height .3s;transition:max-height .3s;overflow:hidden}.pixnet-happix-pilot__share-list.action{max-height:42px}.pixnet-happix-pilot__share-list>a{display:block;height:32px}.pixnet-happix-pilot__share-list__share-fb,.pixnet-happix-pilot__share-list__share-link{display:inline-block;width:32px;height:32px;cursor:pointer}.pixnet-happix-pilot__share-list__share-fb{background:url(https://streamtopic.pixnet.net/asset/images/icons/btn_share_fb.svg) 0 no-repeat}.pixnet-happix-pilot__share-list__share-link{background:url(https://streamtopic.pixnet.net/asset/images/icons/btn_copylink.svg) 0 no-repeat}.pixnet-happix-pilot__share-amount{font-size:12px;color:#81828e}");var Ii=function(t){function e(t){var n;return Z(this,e),(n=Ce(this,Oe(e).call(this,t))).cssPrefix=n.getCssPrefix(),n.isMobile="mobile"===window.deviceType,n}return Ae(e,qe),tt(e,[{key:"getTemplates",value:function(){var t='<span class="'.concat(this.cssPrefix,'__share-list__share-line"></span>');return'\n            <div class="'.concat(this.cssPrefix,'__share-list-mask"></div>\n            <img src="').concat("https://s.pixfs.net/common",'/icons/btn_share.svg" alt="分享" />\n            <span class="pixnet-happix-pilot__share-amount"></span>\n            <div class="').concat(this.cssPrefix,'__share-list">\n                ').concat(this.isMobile?t:"",'\n                <span class="').concat(this.cssPrefix,'__share-list__share-fb"></span>\n                <span class="').concat(this.cssPrefix,'__share-list__share-link"></span>\n            </div>\n        ')}},{key:"bindEvent",value:function(){var t=this,e=window.pix||{};this.shareList=Ve.getElementByPostfix("share-list"),this.fbButton=this.shareList.getElementByPostfix("share-list__share-fb"),this.copyLinkButton=this.shareList.getElementByPostfix("share-list__share-link"),this.isMobile&&(this.lineButton=this.shareList.getElementByPostfix("share-list__share-line"),this.lineButton.bindEvent("click",function(){Li(t.getLINEShareLink()),pn({category:"functionBar",action:"shareClick",label:"shareLine"}),e.blogsharelog&&e.blogsharelog("line")})),this.fbButton.bindEvent("click",function(){Li(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"https://www.facebook.com/sharer/sharer.php?\n        app_id=".concat(De,"&display=popup&u=").concat(encodeURIComponent(t))}(location.href)),pn({category:"functionBar",action:"shareClick",label:"shareFB"}),e.blogsharelog&&e.blogsharelog("facebook")}),this.copyLinkButton.bindEvent("click",function(){(function(){try{var t=document.createElement("input"),e=document.getElementById("header-prompt"),n=document.getElementsByTagName("body")[0],i=location.href;if(t.value=i,n.appendChild(t),navigator.userAgent.match(/ipad|ipod|iphone/i)){var o=t.contentEditable,r=t.readOnly,a=document.createRange(),s=window.getSelection();t.contentEditable=!0,t.readOnly=!0,a.selectNodeContents(t),s.removeAllRanges(),s.addRange(a),t.setSelectionRange(0,999999),t.contentEditable=o,t.readOnly=r}else t.select();document.execCommand("copy"),t.blur(),t.remove(),e&&(e.innerHTML="複製連結成功(・∀・)b",e.classList+=" prompt-success",setTimeout(function(){e.classList="header-prompt"},2e3))}catch(t){console.log(exception)}})(),Li(),pn({category:"functionBar",action:"shareClick",label:"shareLink"}),e.blogsharelog&&e.blogsharelog("link")})}},{key:"getLINEShareLink",value:function(){var t=encodeURIComponent(location.href);return"https://social-plugins.line.me/lineit/share?url=".concat(t)}},{key:"getShareAmount",value:function(){var t=document.querySelector(".".concat(this.cssPrefix,"__share-amount"))||{},e=document.getElementsByTagName("body")[0].dataset.sharedsCount||"";t.innerText=e}},{key:"render",value:function(){this.containerElement.setHTML(this.getTemplates()),this.bindEvent(),this.getShareAmount()}}]),e}(),zi={getItem:function(t){return t&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(t,e,n,i,o,r){if(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))return!1;var a="";if(n)switch(n.constructor){case Number:a=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:a="; expires="+n;break;case Date:a="; expires="+n.toUTCString()}return document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+a+(o?"; domain="+o:"")+(i?"; path="+i:"")+(r?"; secure":""),!0},removeItem:function(t,e,n){return!!this.hasItem(t)&&(document.cookie=encodeURIComponent(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(e?"; path="+e:""),!0)},hasItem:function(t){return!(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var t=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),e=t.length,n=0;n<e;n++)t[n]=decodeURIComponent(t[n]);return t}},Fi=function(t,e){var n=".pixnet.net".concat(window.pix&&window.pix.domain_append||"");zi.setItem(t,e,null,null,n)},Di=function(t,e){if(t){var n=zi.getItem(t),i=kn.now();return kn.withinSpecificHours(n,i,e)}return!1};hn('.pixnet-happix-pilot__launcher-bar{position:fixed;right:0;bottom:0;left:0;width:100vw;height:45px;background-color:#fff;-webkit-box-shadow:0 -2px 20px 0 rgba(0,0,0,.1);box-shadow:0 -2px 20px 0 rgba(0,0,0,.1)}.pixnet-happix-pilot__launcher-bar>*{-webkit-font-smoothing:antialiased}.pixnet-happix-pilot__launcher-bar-mask{position:fixed;top:0;bottom:0;z-index:2;width:100vw;height:100%;background:rgba(0,0,0,.6);opacity:0;pointer-events:none;will-change:opacity}.pixnet-happix-pilot__launcher-bar-mask.active{opacity:1;pointer-events:auto}.pixnet-happix-pilot__launcher-bar__wrapper{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;height:100%;margin:auto;background:#fff}.pixnet-happix-pilot__launcher-bar__function{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0;padding:0}.pixnet-happix-pilot__launcher-bar__function .container-item{display:-webkit-box;display:-ms-flexbox;display:flex;margin-left:16px;list-style-type:none}.pixnet-happix-pilot__launcher-bar__share{position:relative;cursor:pointer}.pixnet-happix-pilot__launcher-bar__comment{cursor:pointer}.pixnet-happix-pilot__launcher-bar__button-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:1;padding:0 6px;background:#6eacf5;border-top-left-radius:22px;border-bottom-left-radius:22px;-webkit-transition:.5s;transition:.5s}.pixnet-happix-pilot__launcher-bar__button-container:after{content:"";position:absolute;left:100%;display:block;width:100vw;height:100%;background:#6eacf5}.pixnet-happix-pilot__launcher-bar__button-container .container-item+.container-item{margin-left:24px}.pixnet-happix-pilot__launcher-bar__button-container__gift-button{width:30px;height:30px;border-radius:100%}.pixnet-happix-pilot__launcher-bar__button-container__gift-button-inner{width:30px;height:30px;background-color:#fff;border-radius:100%;background-image:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_gift.svg)}.pixnet-happix-pilot__launcher-bar__button-container__gift-button-inner:after{content:"";display:inline-block;width:30px;height:30px;background-color:#f6f6f6;background-image:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_gift_cta_no.svg);border-radius:100%;cursor:not-allowed}.activat-gift .pixnet-happix-pilot__launcher-bar__button-container__gift-button-inner:after{opacity:0;cursor:pointer}.gift-bounce .pixnet-happix-pilot__launcher-bar__button-container__gift-button-inner{-webkit-animation:bounce 1s;animation:bounce 1s}.gift-scale .pixnet-happix-pilot__launcher-bar__button-container__gift-button-inner{-webkit-animation:scale .6s;animation:scale .6s}.pixnet-happix-pilot__launcher-bar__button-container .notify{position:relative;border-radius:50%;-webkit-box-shadow:0 0 0 0 #fff;box-shadow:0 0 0 0 #fff;-webkit-animation:happix_pulse 1.5s 5;animation:happix_pulse 1.5s 5}.pixnet-happix-pilot__launcher-bar__button-container__happix-button-img{display:block;width:30px;height:30px;cursor:pointer}@media screen and (max-width:768px){.pixnet-happix-pilot__launcher-bar.showed-gift{-webkit-box-shadow:none;box-shadow:none}.pixnet-happix-pilot__launcher-bar:before{content:"";position:absolute;top:0;z-index:1;display:block;width:100vw;height:2px;background:#6eacf5;-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0);-webkit-transition:-webkit-transform .3s;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s;will-change:transform}.showed-gift.pixnet-happix-pilot__launcher-bar:before{-webkit-transform:translateZ(0);transform:translateZ(0)}.showed-gift .pixnet-happix-pilot__launcher-bar__button-container{border-top-left-radius:0}}@-webkit-keyframes happix_pulse{0%{-webkit-transform:scale(1);transform:scale(1)}70%{-webkit-transform:scale(1.1);transform:scale(1.1);-webkit-box-shadow:0 0 0 7px hsla(0,0%,100%,0);box-shadow:0 0 0 7px hsla(0,0%,100%,0)}to{-webkit-transform:scale(1);transform:scale(1);-webkit-box-shadow:0 0 0 0 hsla(0,0%,100%,0);box-shadow:0 0 0 0 hsla(0,0%,100%,0)}}@keyframes happix_pulse{0%{-webkit-transform:scale(1);transform:scale(1)}70%{-webkit-transform:scale(1.1);transform:scale(1.1);-webkit-box-shadow:0 0 0 7px hsla(0,0%,100%,0);box-shadow:0 0 0 7px hsla(0,0%,100%,0)}to{-webkit-transform:scale(1);transform:scale(1);-webkit-box-shadow:0 0 0 0 hsla(0,0%,100%,0);box-shadow:0 0 0 0 hsla(0,0%,100%,0)}}@-webkit-keyframes bounce{0%,20%,53%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1);-webkit-transform:translateZ(0);transform:translateZ(0)}40%,43%{-webkit-transform:translate3d(0,-30px,0);transform:translate3d(0,-30px,0)}40%,43%,70%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06)}70%{-webkit-transform:translate3d(0,-15px,0);transform:translate3d(0,-15px,0)}90%{-webkit-transform:translate3d(0,-4px,0);transform:translate3d(0,-4px,0)}}@keyframes bounce{0%,20%,53%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1);-webkit-transform:translateZ(0);transform:translateZ(0)}40%,43%{-webkit-transform:translate3d(0,-30px,0);transform:translate3d(0,-30px,0)}40%,43%,70%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06)}70%{-webkit-transform:translate3d(0,-15px,0);transform:translate3d(0,-15px,0)}90%{-webkit-transform:translate3d(0,-4px,0);transform:translate3d(0,-4px,0)}}@-webkit-keyframes scale{0%{-webkit-transition-timing-function:ease-out;transition-timing-function:ease-out;-webkit-transform:scale(1.5);transform:scale(1.5)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes scale{0%{-webkit-transition-timing-function:ease-out;transition-timing-function:ease-out;-webkit-transform:scale(1.5);transform:scale(1.5)}to{-webkit-transform:scale(1);transform:scale(1)}}');var Ri=function(t){function e(t){var n;return Z(this,e),(n=Ce(this,Oe(e).call(this,t))).options=en.getOptions(),n.happixMessengerData={data:{},setDataFlag:!1},n.visibleState={happixMessengerState:!1,giftState:!1,happixNotificationState:!1,shareListState:!1,commentBlockState:!1},n.notiShowedIsActed=Di(ze,168),n.showGiftNotification=n.showGiftNotification.bind(Ee(Ee(n))),n.hideGiftNotification=n.hideGiftNotification.bind(Ee(Ee(n))),n.showHappixMessenger=n.showHappixMessenger.bind(Ee(Ee(n))),n.hideHappixMessenger=n.hideHappixMessenger.bind(Ee(Ee(n))),n}return Ae(e,qe),tt(e,[{key:"getTemplate",value:function(){var t=this.getCssPrefix();return'\n            <div class="'.concat(t,'__launcher-bar-mask"></div>\n            <div class="').concat(t,'__launcher-bar"\n                style="z-index:').concat(this.options.getPilotZIndex(),'"\n            >\n                <div\n                    class="').concat(t,'__launcher-bar__wrapper"\n                    style="max-width: ').concat(this.options.getPilotWidth(),'px"\n                >\n                    <ul class="').concat(t,'__launcher-bar__function">\n                        <li class="').concat(t,'__launcher-bar__comment container-item"></li>\n                        <li class="').concat(t,'__launcher-bar__share container-item"></li>\n                    </ul>\n\n                    <div class="').concat(t,'__launcher-bar__button-container">\n                        <div class="').concat(t,'__launcher-bar__button-container__gift-button container-item">\n                            <div class="').concat(t,'__launcher-bar__button-container__gift-button-inner"></div>\n                        </div>\n                        <div class="').concat(t,'__launcher-bar__button-container__happix-button container-item">\n                            <img class="').concat(t,'__launcher-bar__button-container__happix-button-img"\n                                src="').concat(Fe,'/btn_happix_guide.svg"/>\n                        </div>\n                    </div>\n                </div>\n                <div class="').concat(t,'__launcher-bar__happix-messenger"></div>\n            </div>\n            <div class="').concat(t,'__launcher-bar__gift-notification"></div>\n            <div class="').concat(t,'__launcher-bar__happix-notification"></div>\n        ')}},{key:"getElements",value:function(){this.maskElement=Ve.getElementByPostfix("launcher-bar-mask"),this.launcherBarElement=Ve.getElementByPostfix("launcher-bar"),this.buttonContainerElement=this.launcherBarElement.getElementByPostfix("launcher-bar__button-container"),this.giftButtonElement=this.launcherBarElement.getElementByPostfix("launcher-bar__button-container__gift-button"),this.happixButtonElement=this.launcherBarElement.getElementByPostfix("launcher-bar__button-container__happix-button"),this.happixNotificationElement=Ve.getElementByPostfix("launcher-bar__happix-notification"),this.giftNotificationElement=Ve.getElementByPostfix("launcher-bar__gift-notification"),this.happixMessengerElement=this.launcherBarElement.getElementByPostfix("launcher-bar__happix-messenger"),this.commentElement=this.launcherBarElement.getElementByPostfix("launcher-bar__comment"),this.shareElement=this.launcherBarElement.getElementByPostfix("launcher-bar__share")}},{key:"bindEvents",value:function(){var t=this;this.maskElement.bindEvent("click",function(){return t.closeShareList()}),this.happixNotificationElement.bindEvent("click",function(){t.showHappixMessenger(),pn({category:"pilot-happixSpeak",action:"happixClick"})}).bindEvent("close",function(){t.hideHappixNotification(),pn({category:"pilot-happixSpeak",action:"happixClose"})}),this.giftNotificationElement.bindEvent("close",function(){return t.hideGiftNotification()}),this.giftButtonElement.bindEvent("click",function(){return t.clickGiftButton()}),this.happixMessengerElement.bindEvent("close",function(){return t.hideHappixMessenger()}),this.happixButtonElement.bindEvent("click",function(){return t.clickHappixButton()}),this.commentElement.bindEvent("click",function(){t.activateCommentBlock(),pn({category:"functionBar",action:"commentClick"})}),this.shareElement.bindEvent("click",function(){return t.toggleShareList()})}},{key:"setData",value:function(t,e,n,i,o){this.happixMessengerData.data={weather:t,memberInfo:e,coupon:n,task:i},this.happixNotification.setMessage(o)}},{key:"setGiftNotificationData",value:function(t){en.setOptions({giftNotificationContent:t}),rn(t.widget_content.ga,en.getOptions().getMemberUniqid()),cn("CTA_Load"),this.giftNotification=new fn(this.giftNotificationElement,t).render().hide(),this.activateGiftNotificationFlow()}},{key:"clickGiftButton",value:function(){var t=this.visibleState.giftState,e={category:"pilot-CTA",action:t?"giftClickClose":"giftClickOpen"};t?this.hideGiftNotification(e):this.showGiftNotification(e)}},{key:"clickHappixButton",value:function(){var t={category:"pilot-happixSpeak",action:"smallHappixClick"};this.visibleState.happixMessengerState?this.hideHappixMessenger(t):this.showHappixMessenger(t)}},{key:"showHappixNotification",value:function(){this.happixNotification.show(),this.happixButtonElement.removeClass("notify"),Fi(ze,kn.now()),this.updateState("happixNotificationState",!0)}},{key:"hideHappixNotification",value:function(){var t=this;this.happixNotification.hide(),setTimeout(function(){t.happixButtonElement.addClass("notify")},334),this.updateState("happixNotificationState",!1)}},{key:"showGiftNotification",value:function(t){this.giftNotification&&(this.giftNotification.show(),this.launcherBarElement.addClass("showed-gift").removeClass("gift-scale"),t&&pn(t),this.updateState("giftState",!0))}},{key:"hideGiftNotification",value:function(t){this.giftNotification&&this.giftNotification.hide(),this.launcherBarElement.removeClass("showed-gift").removeClass("gift-bounce").addClass("gift-scale"),t&&pn(t),this.updateState("giftState",!1)}},{key:"showHappixMessenger",value:function(t){var e=this.happixMessengerData,n=e.data;e.setDataFlag||(this.happixMessenger.setData(n),this.happixMessengerData.setDataFlag=!0),this.happixMessenger.show(),this.happixButtonElement.removeClass("notify"),t&&pn(t),this.updateState("happixMessengerState",!0)}},{key:"hideHappixMessenger",value:function(t){this.happixMessenger.hide(),t&&pn(t),this.updateState("happixMessengerState",!1)}},{key:"toggleShareList",value:function(){this.shareElement.getElementByPostfix("share-list").hasClass("action")?this.closeShareList():this.openShareList()}},{key:"openShareList",value:function(){this.maskElement.setStyle("transition","opacity .3s").addClass("active"),this.shareElement.getElementByPostfix("share-list").addClass("action"),this.updateState("shareListState",!0)}},{key:"closeShareList",value:function(){this.maskElement.removeClass("active"),this.shareElement.getElementByPostfix("share-list").removeClass("action"),this.updateState("shareListState",!1)}},{key:"activateCommentBlock",value:function(){if("mobile"===(window.deviceType||"")){var t=document.getElementById("comment-block");if(!t)return;return t.classList.add("active"),void this.updateState("commentBlockState",!0)}var e=document.getElementById("comment_text");e&&(window.scrollTo(0,e.offsetBottom-50),e.focus())}},{key:"activateHappixNotificationFlow",value:function(){var t=this;this.notiShowedIsActed||(setTimeout(function(){t.hasGiftNotification()||(t.showHappixNotification(),setTimeout(function(){t.hideHappixNotification(),t.happixButtonElement.addClass("notify")},1e4))},1e4),pn({category:"pilot-happixSpeak",action:"happixImpression"}))}},{key:"activateGiftNotificationFlow",value:function(){var t=this,e=this.launcherBarElement;window.innerHeight<530?e.addClass("activat-gift"):setTimeout(function(){e.addClass("activat-gift").addClass("gift-bounce"),setTimeout(function(){return t.showGiftNotification()},800)},3e3)}},{key:"hasGiftNotification",value:function(){return this.launcherBarElement.hasClass("activat-gift")}},{key:"updateState",value:function(t,e){this.visibleState[t]=e,this.checkState(t)}},{key:"checkState",value:function(t){var e=this,n=K(this.visibleState).filter(function(t){return e.visibleState[t]});n.length>1&&this.closeOpenedButton(n.filter(function(e){return e!==t}))}},{key:"closeOpenedButton",value:function(t){var e=this;({happixMessengerState:this.hideHappixMessenger,giftState:this.hideGiftNotification,shareListState:function(){return e.closeShareList()},commentBlockState:function(){return e.updateState("commentBlockState",!1)}})[t]()}},{key:"render",value:function(){var t=this;return this.containerElement.setHTML(this.getTemplate()),this.getElements(),this.bindEvents(),this.happixNotification=new xn(this.happixNotificationElement).render(),this.happixMessenger=new On(this.happixMessengerElement,{dangling:!0}).render(),this.Comment=new Hi(this.commentElement).render(),this.Share=new Ii(this.shareElement).render(),Di("pilot_happix_pulse_animation_timestamp",168)||setTimeout(function(){Fi("pilot_happix_pulse_animation_timestamp",kn.now()),t.happixButtonElement.addClass("notify")},12e3),this}}]),e}(),Wi=Math.floor;q(q.S,"Number",{isInteger:function(t){return!B(t)&&isFinite(t)&&Wi(t)===t}});var Gi=m.Number.isInteger,Yi=m.JSON||(m.JSON={stringify:JSON.stringify}),$i=function(t){return Yi.stringify.apply(Yi,arguments)};hn('.pixnet-happix-pilot__launcher-bubble{position:fixed}.pixnet-happix-pilot__launcher-bubble>*{-webkit-font-smoothing:antialiased}.pixnet-happix-pilot__launcher-bubble__wrapper{position:fixed;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:right;-ms-flex-pack:right;justify-content:right;max-height:80px}.pixnet-happix-pilot__launcher-bubble__wrapper.hidden{visibility:hidden}.pixnet-happix-pilot__launcher-bubble__noti_container{position:relative;top:5px;margin:0 8px 0 25px;cursor:pointer}.pixnet-happix-pilot__launcher-bubble__noti_container.hidden{overflow:hidden;opacity:0;-webkit-transform:translateX(30px);transform:translateX(30px);-webkit-transition:opacity .3s linear,-webkit-transform .2s linear;transition:opacity .3s linear,-webkit-transform .2s linear;transition:opacity .3s linear,transform .2s linear;transition:opacity .3s linear,transform .2s linear,-webkit-transform .2s linear}.pixnet-happix-pilot__launcher-bubble__noti_container:after{content:"";position:absolute;top:0;right:-8px;display:inline-block;width:8px;height:16px;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/conversation_black@2x.png) no-repeat;background-size:contain}.pixnet-happix-pilot__launcher-bubble__noti_msg{position:relative;padding:12px 15px;font-size:13px;font-weight:500;color:#fff;letter-spacing:1px;border-radius:20px;border-top-right-radius:0;background-color:rgba(0,0,0,.8)}.pixnet-happix-pilot__launcher-bubble__btn_close_alpha{position:absolute;top:-25px;left:-17px;cursor:pointer}.pixnet-happix-pilot__launcher-bubble__btn_happix_ufo{-webkit-box-flex:0;-ms-flex:none;flex:none;width:70px;height:80px;-o-object-fit:contain;object-fit:contain;cursor:pointer}@media screen and (max-width:768px){.pixnet-happix-pilot__launcher-bubble{bottom:0}}@media screen and (min-width:769px){.pixnet-happix-pilot__launcher-bubble__noti_container{max-width:240px}}');var Ui=function(t){function e(t){var n;return Z(this,e),(n=Ce(this,Oe(e).call(this,t))).cookiesData=JSON.parse(zi.getItem("pilot_bubble"))||{},n.happixMessengerData={data:{},setDataFlag:!1},n.showHappixGuideMsg=!1,n.showHappixMessenger=n.showHappixMessenger.bind(Ee(Ee(n))),n.hideHappixMessenger=n.hideHappixMessenger.bind(Ee(Ee(n))),n.clickHappix=n.clickHappix.bind(Ee(Ee(n))),n.dragHappix=n.dragHappix.bind(Ee(Ee(n))),n.setHappixPosition=n.setHappixPosition.bind(Ee(Ee(n))),n}return Ae(e,qe),tt(e,[{key:"getTemplate",value:function(){var t=this.getCssPrefix(),e=en.getOptions();return'\n            <div class="'.concat(t,'__launcher-bubble"\n                style="max-width: ').concat(e.getPilotWidth(),"px; z-index: ").concat(e.getPilotZIndex(),'"\n            >\n                <div class="').concat(t,'__launcher-bubble__wrapper">\n                    <div class="').concat(t,'__launcher-bubble__noti_container hidden" style="display: none;">\n                        <div class="').concat(t,'__launcher-bubble__noti_msg"></div>\n                        <img\n                            class="').concat(t,'__launcher-bubble__btn_close_alpha"\n                            src="').concat(Fe,'/btn-close-alpha.svg"\n                        >\n                    </div>\n                    <img\n                        class="').concat(t,'__launcher-bubble__btn_happix_ufo"\n                        src="').concat(Fe,'/btn-happix-ufo.png"\n                        srcset="').concat(Fe,"/btn-happix-ufo@2x.png 2x,\n                                ").concat(Fe,'/btn-happix-ufo@3x.png 3x"\n                    >\n                </div>\n                <div class="').concat(t,'__launcher-bubble__happix-messenger"></div>\n            </div>')}},{key:"getElements",value:function(){this.launchBubbleContainerElement=Ve.getElementByPostfix("launcher-bubble"),this.happix=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__btn_happix_ufo"),this.notificationContainerElement=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__noti_container"),this.notificationMsg=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__noti_msg"),this.closeBtn=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__btn_close_alpha"),this.happixMessengerElement=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__happix-messenger"),this.happixWrapper=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__wrapper")}},{key:"bindEvents",value:function(){this.happixMessengerElement.bindEvent("close",this.hideHappixMessenger),this.happixWrapper.bindEvent("mousedown",this.dragHappix).bindEvent("click",this.clickHappix)}},{key:"setData",value:function(t,e,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"嗨～點一點領航員Happix的頭，有專屬於你的會員驚喜喲！";this.happixMessengerData.data={weather:t,memberInfo:e,coupon:n,task:i},this.showHappixGuideMsg&&(this.notificationMsg.setHTML(o),this.notificationContainerElement.removeClass("hidden").setStyle("display","block"),pn({category:"pilot-happixSpeak",action:"happixImpression"})),this.bindCloseEvent()}},{key:"expandNotification",value:function(){Di(ze,168)||(this.showHappixGuideMsg=!0,Fi(ze,kn.now()))}},{key:"collapseNotification",value:function(){this.notificationContainerElement.addClass("hidden"),this.hideElem(this.notificationContainerElement,300)}},{key:"bindCloseEvent",value:function(){var t=this;this.closeBtn.bindEvent("click",function(e){e.stopPropagation(),t.collapseNotification(),pn({category:"pilot-happixSpeak",action:"happixClose"})})}},{key:"clickHappix",value:function(t){var e=t.target.className.match("launcher-bubble__btn_happix_ufo");this.happixWrapper.addClass("hidden"),this.showHappixMessenger(),pn({category:"pilot-happixSpeak",action:e?"smallHappixClick":"happixClick"})}},{key:"showHappixMessenger",value:function(){var t=this.happixMessengerData,e=t.data;t.setDataFlag||(this.happixMessenger.setData(e),this.happixMessengerData.setDataFlag=!0),this.happixMessenger.show()}},{key:"hideHappixMessenger",value:function(){this.happixWrapper.removeClass("hidden"),this.happixMessenger.hide()}},{key:"calcDraggableHappixMoveAt",value:function(t,e,n){var i=t.top,o=t.left,r=t.width,a=t.height,s=e.clientX,p=e.clientY,c=n.pageX,l=n.pageY,u=window,h=u.innerWidth,f=h-r,x=u.innerHeight-a,d=c-(s-o),_=l-(p-i)-u.scrollY;return{rightMoveAt:h-(d<0?0:d>f?f:d)-r,topMoveAt:_<45?45:_>x?x:_}}},{key:"dragHappix",value:function(t){var e=this,n=!1,i=this.happixWrapper.getElement(),o=i.getBoundingClientRect();i.ondragstart=function(){return!1},document.onmousemove=function(r){n=!0;var a=e.calcDraggableHappixMoveAt(o,t,r),s=a.rightMoveAt,p=a.topMoveAt;i.style.right="".concat(s,"px"),i.style.top="".concat(p,"px"),Fi("pilot_bubble",$i({happixWrapperPosition:{right:s,top:p},tipTimestamp:kn.now()}))},document.onmouseup=function(){n?(e.happixWrapper.unbindEvent("click",e.clickHappix),pn({category:"pilot-happixSpeak",action:"smallHappixDrag"})):e.happixWrapper.bindEvent("click",e.clickHappix),document.onmousemove=null,document.onmouseup=null}}},{key:"initHappixPosition",value:function(){var t=this.cookiesData.happixWrapperPosition,e=en.getOptions(),n=e.getPilotWidth(),i=e.getBubbleFixedPosition(),o=K(i).some(function(t){return Gi(i[t])}),r={right:window.innerWidth>n?(window.innerWidth-n)/2+10:10,bottom:30};t?this.setHappixPosition(t):o?this.setHappixPosition(i):this.setHappixPosition(r)}},{key:"setHappixPosition",value:function(t){var e=t.left,n=t.right,i=void 0===n?10:n,o=t.top,r=t.bottom,a=void 0===r?30:r,s=window,p=s.innerHeight,c=s.innerWidth,l=this.happixWrapper.getElement().getBoundingClientRect(),u=l.height,h=l.width,f=Gi(e)?c-h-e:i,x=Gi(o)?o:p-u-a;this.happixWrapper.setStyle("right","".concat(f,"px")).setStyle("top","".concat(x,"px"))}},{key:"hideElem",value:function(t,e){setTimeout(function(){return t.setStyle("display","none")},e)}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplate()),this.getElements(),this.bindEvents(),this.initHappixPosition(),this.expandNotification(),this.happixMessenger=new On(this.happixMessengerElement).render().hide(),this}}]),e}(),qi="desktop"===window.deviceType,Vi=document.createElement("div"),Ki=qi?".main-container":"#main-content",Zi=qi?"bubble":"bar";Vi.id="pilot",document.querySelector(Ki).appendChild(Vi);var Ji=pix.domain_append?"http":"https";window.PixnetHappixPilot=new function(t,e){return{create:function(){var n=Ve.getElementBySelector(t);en.setOptions(e),nn();var i=en.getOptions().getVariant(),o=null;return"bar"===i?o=new Ri(n).render():"bubble"===i&&(o=new Ui(n).render()),function t(){void 0!==(window.pix||{}).member_token?Ai.sendHappixAPI("get","/pilot-data").then(function(t){var e=t.pilot_content,n=e.weather,i=e.member_info,r=e.coupon,a=e.task,s=e.guide_message;(function(t){var e=en.getOptions();e.isIncludeGAScript()&&(on(e.getTrackingId()),t&&sn(t)),e.isIncludePAScript()&&an(e.getVenue(),t)})(i.member_uniqid),en.setOptions({memberUniqid:i.member_uniqid}),o&&o.setData(n,i,r,a,s)}).catch(function(t){console.log(t)}):setTimeout(function(){t()},100)}(),o}}}("#pilot",{variant:Zi,projectName:"blog",domainAppend:"",loginURL:Ji+"://panel.pixnet.cc"+pix.domain_append+"/login/openid?openid="+Ji+"%3A%2F%2Fmember.pixnet.cc"+pix.domain_append+"%2Flogin&easy_login=1&done="+(encodeURIComponent(window.location.href)||"")+"&from_service=Blog",logoutURL:Ji+"://panel.pixnet.cc"+pix.domain_append+"/logout?done="+Ji+"%3A%2F%2Fmember.pixnet.cc"+pix.domain_append+"%2Flogout%3Fdone%3D"+(encodeURIComponent(window.location.href)||""),ga:{isIncludeGAScript:!0,trackingId:"UA-408650-39"},pa:{isIncludePAScript:!0,venue:"pixnet"},style:{zIndex:{pilotZIndex:qi?1e8:99999},width:{pilotWidth:960}}}).create()}();
